{"version":3,"file":"frappe-charts.min.js","sources":["../../../node_modules/style-inject/dist/style-inject.es.js","../../../src/js/utils/dom.js","../../../src/js/utils/constants.js","../../../src/js/objects/SvgTip.js","../../../src/js/utils/helpers.js","../../../src/js/utils/draw-utils.js","../../../src/js/utils/colors.js","../../../src/js/utils/draw.js","../../../src/js/utils/animate.js","../../../src/js/utils/animation.js","../../../src/css/chartsCss.js","../../../src/js/utils/export.js","../../../src/js/charts/BaseChart.js","../../../src/js/charts/AggregationChart.js","../../../src/js/utils/date-utils.js","../../../src/js/objects/ChartComponents.js","../../../src/js/charts/PercentageChart.js","../../../src/js/charts/PieChart.js","../../../src/js/utils/intervals.js","../../../src/js/charts/Heatmap.js","../../../src/js/utils/axis-chart-utils.js","../../../src/js/charts/AxisChart.js","../../../src/js/charts/DonutChart.js","../../../src/js/chart.js","../../../src/js/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","export function $(expr, con) {\n\treturn typeof expr === \"string\"? (con || document).querySelector(expr) : expr || null;\n}\n\nexport function findNodeIndex(node)\n{\n\tvar i = 0;\n\twhile (node.previousSibling) {\n\t\tnode = node.previousSibling;\n\t\ti++;\n\t}\n\treturn i;\n}\n\n$.create = (tag, o) => {\n\tvar element = document.createElement(tag);\n\n\tfor (var i in o) {\n\t\tvar val = o[i];\n\n\t\tif (i === \"inside\") {\n\t\t\t$(val).appendChild(element);\n\t\t}\n\t\telse if (i === \"around\") {\n\t\t\tvar ref = $(val);\n\t\t\tref.parentNode.insertBefore(element, ref);\n\t\t\telement.appendChild(ref);\n\n\t\t} else if (i === \"styles\") {\n\t\t\tif(typeof val === \"object\") {\n\t\t\t\tObject.keys(val).map(prop => {\n\t\t\t\t\telement.style[prop] = val[prop];\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (i in element ) {\n\t\t\telement[i] = val;\n\t\t}\n\t\telse {\n\t\t\telement.setAttribute(i, val);\n\t\t}\n\t}\n\n\treturn element;\n};\n\nexport function getOffset(element) {\n\tlet rect = element.getBoundingClientRect();\n\treturn {\n\t\t// https://stackoverflow.com/a/7436602/6495043\n\t\t// rect.top varies with scroll, so we add whatever has been\n\t\t// scrolled to it to get absolute distance from actual page top\n\t\ttop: rect.top + (document.documentElement.scrollTop || document.body.scrollTop),\n\t\tleft: rect.left + (document.documentElement.scrollLeft || document.body.scrollLeft)\n\t};\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetParent\n// an element's offsetParent property will return null whenever it, or any of its parents,\n// is hidden via the display style property.\nexport function isHidden(el) {\n\treturn (el.offsetParent === null);\n}\n\nexport function isElementInViewport(el) {\n\t// Although straightforward: https://stackoverflow.com/a/7557433/6495043\n\tvar rect = el.getBoundingClientRect();\n\n\treturn (\n\t\trect.top >= 0 &&\n        rect.left >= 0 &&\n        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) && /*or $(window).height() */\n        rect.right <= (window.innerWidth || document.documentElement.clientWidth) /*or $(window).width() */\n\t);\n}\n\nexport function getElementContentWidth(element) {\n\tvar styles = window.getComputedStyle(element);\n\tvar padding = parseFloat(styles.paddingLeft) +\n\t\tparseFloat(styles.paddingRight);\n\n\treturn element.clientWidth - padding;\n}\n\nexport function bind(element, o){\n\tif (element) {\n\t\tfor (var event in o) {\n\t\t\tvar callback = o[event];\n\n\t\t\tevent.split(/\\s+/).forEach(function (event) {\n\t\t\t\telement.addEventListener(event, callback);\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function unbind(element, o){\n\tif (element) {\n\t\tfor (var event in o) {\n\t\t\tvar callback = o[event];\n\n\t\t\tevent.split(/\\s+/).forEach(function(event) {\n\t\t\t\telement.removeEventListener(event, callback);\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function fire(target, type, properties) {\n\tvar evt = document.createEvent(\"HTMLEvents\");\n\n\tevt.initEvent(type, true, true );\n\n\tfor (var j in properties) {\n\t\tevt[j] = properties[j];\n\t}\n\n\treturn target.dispatchEvent(evt);\n}\n\n// https://css-tricks.com/snippets/javascript/loop-queryselectorall-matches/\nexport function forEachNode(nodeList, callback, scope) {\n\tif(!nodeList) return;\n\tfor (var i = 0; i < nodeList.length; i++) {\n\t\tcallback.call(scope, nodeList[i], i);\n\t}\n}\n\nexport function activate($parent, $child, commonClass, activeClass='active', index = -1) {\n\tlet $children = $parent.querySelectorAll(`.${commonClass}.${activeClass}`);\n\n\tforEachNode($children, (node, i) => {\n\t\tif(index >= 0 && i <= index) return;\n\t\tnode.classList.remove(activeClass);\n\t});\n\n\t$child.classList.add(activeClass);\n}\n","export const ALL_CHART_TYPES = ['line', 'scatter', 'bar', 'percentage', 'heatmap', 'pie'];\n\nexport const COMPATIBLE_CHARTS = {\n\tbar: ['line', 'scatter', 'percentage', 'pie'],\n\tline: ['scatter', 'bar', 'percentage', 'pie'],\n\tpie: ['line', 'scatter', 'percentage', 'bar'],\n\tpercentage: ['bar', 'line', 'scatter', 'pie'],\n\theatmap: []\n};\n\nexport const DATA_COLOR_DIVISIONS = {\n\tbar: 'datasets',\n\tline: 'datasets',\n\tpie: 'labels',\n\tpercentage: 'labels',\n\theatmap: HEATMAP_DISTRIBUTION_SIZE\n};\n\nexport const BASE_MEASURES = {\n\tmargins: {\n\t\ttop: 10,\n\t\tbottom: 10,\n\t\tleft: 20,\n\t\tright: 20\n\t},\n\tpaddings: {\n\t\ttop: 20,\n\t\tbottom: 40,\n\t\tleft: 30,\n\t\tright: 10\n\t},\n\n\tbaseHeight: 240,\n\ttitleHeight: 20,\n\tlegendHeight: 30,\n\n\ttitleFontSize: 12,\n};\n\nexport function getTopOffset(m) {\n\treturn m.titleHeight + m.margins.top + m.paddings.top;\n}\n\nexport function getLeftOffset(m) {\n\treturn m.margins.left + m.paddings.left;\n}\n\nexport function getExtraHeight(m) {\n\tlet totalExtraHeight = m.margins.top + m.margins.bottom\n\t\t+ m.paddings.top + m.paddings.bottom\n\t\t+ m.titleHeight + m.legendHeight;\n\treturn totalExtraHeight;\n}\n\nexport function getExtraWidth(m) {\n\tlet totalExtraWidth = m.margins.left + m.margins.right\n\t\t+ m.paddings.left + m.paddings.right;\n\n\treturn totalExtraWidth;\n}\n\nexport const INIT_CHART_UPDATE_TIMEOUT = 700;\nexport const CHART_POST_ANIMATE_TIMEOUT = 400;\n\nexport const DEFAULT_AXIS_CHART_TYPE = 'line';\nexport const AXIS_DATASET_CHART_TYPES = ['line', 'bar'];\n\nexport const AXIS_LEGEND_BAR_SIZE = 100;\n\nexport const BAR_CHART_SPACE_RATIO = 0.5;\nexport const MIN_BAR_PERCENT_HEIGHT = 0.00;\n\nexport const LINE_CHART_DOT_SIZE = 4;\nexport const DOT_OVERLAY_SIZE_INCR = 4;\n\nexport const PERCENTAGE_BAR_DEFAULT_HEIGHT = 20;\nexport const PERCENTAGE_BAR_DEFAULT_DEPTH = 2;\n\n// Fixed 5-color theme,\n// More colors are difficult to parse visually\nexport const HEATMAP_DISTRIBUTION_SIZE = 5;\n\nexport const HEATMAP_SQUARE_SIZE = 10;\nexport const HEATMAP_GUTTER_SIZE = 2;\n\nexport const DEFAULT_CHAR_WIDTH = 7;\n\nexport const TOOLTIP_POINTER_TRIANGLE_HEIGHT = 5;\n\nconst DEFAULT_CHART_COLORS = ['light-blue', 'blue', 'violet', 'red', 'orange',\n\t'yellow', 'green', 'light-green', 'purple', 'magenta', 'light-grey', 'dark-grey'];\nconst HEATMAP_COLORS_GREEN = ['#ebedf0', '#c6e48b', '#7bc96f', '#239a3b', '#196127'];\nexport const HEATMAP_COLORS_BLUE = ['#ebedf0', '#c0ddf9', '#73b3f3', '#3886e1', '#17459e'];\nexport const HEATMAP_COLORS_YELLOW = ['#ebedf0', '#fdf436', '#ffc700', '#ff9100', '#06001c'];\n\nexport const DEFAULT_COLORS = {\n\tbar: DEFAULT_CHART_COLORS,\n\tline: DEFAULT_CHART_COLORS,\n\tpie: DEFAULT_CHART_COLORS,\n\tpercentage: DEFAULT_CHART_COLORS,\n\theatmap: HEATMAP_COLORS_GREEN,\n\tdonut: DEFAULT_CHART_COLORS\n};\n\n// Universal constants\nexport const ANGLE_RATIO = Math.PI / 180;\nexport const FULL_ANGLE = 360;\n","import { $ } from '../utils/dom';\nimport { TOOLTIP_POINTER_TRIANGLE_HEIGHT } from '../utils/constants';\n\nexport default class SvgTip {\n\tconstructor({\n\t\tparent = null,\n\t\tcolors = []\n\t}) {\n\t\tthis.parent = parent;\n\t\tthis.colors = colors;\n\t\tthis.titleName = '';\n\t\tthis.titleValue = '';\n\t\tthis.listValues = [];\n\t\tthis.titleValueFirst = 0;\n\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\n\t\tthis.top = 0;\n\t\tthis.left = 0;\n\n\t\tthis.setup();\n\t}\n\n\tsetup() {\n\t\tthis.makeTooltip();\n\t}\n\n\trefresh() {\n\t\tthis.fill();\n\t\tthis.calcPosition();\n\t}\n\n\tmakeTooltip() {\n\t\tthis.container = $.create('div', {\n\t\t\tinside: this.parent,\n\t\t\tclassName: 'graph-svg-tip comparison',\n\t\t\tinnerHTML: `<span class=\"title\"></span>\n\t\t\t\t<ul class=\"data-point-list\"></ul>\n\t\t\t\t<div class=\"svg-pointer\"></div>`\n\t\t});\n\t\tthis.hideTip();\n\n\t\tthis.title = this.container.querySelector('.title');\n\t\tthis.dataPointList = this.container.querySelector('.data-point-list');\n\n\t\tthis.parent.addEventListener('mouseleave', () => {\n\t\t\tthis.hideTip();\n\t\t});\n\t}\n\n\tfill() {\n\t\tlet title;\n\t\tif(this.index) {\n\t\t\tthis.container.setAttribute('data-point-index', this.index);\n\t\t}\n\t\tif(this.titleValueFirst) {\n\t\t\ttitle = `<strong>${this.titleValue}</strong>${this.titleName}`;\n\t\t} else {\n\t\t\ttitle = `${this.titleName}<strong>${this.titleValue}</strong>`;\n\t\t}\n\t\tthis.title.innerHTML = title;\n\t\tthis.dataPointList.innerHTML = '';\n\n\t\tthis.listValues.map((set, i) => {\n\t\t\tconst color = this.colors[i] || 'black';\n\t\t\tlet value = set.formatted === 0 || set.formatted ? set.formatted : set.value;\n\n\t\t\tlet li = $.create('li', {\n\t\t\t\tstyles: {\n\t\t\t\t\t'border-top': `3px solid ${color}`\n\t\t\t\t},\n\t\t\t\tinnerHTML: `<strong style=\"display: block;\">${ value === 0 || value ? value : '' }</strong>\n\t\t\t\t\t${set.title ? set.title : '' }`\n\t\t\t});\n\n\t\t\tthis.dataPointList.appendChild(li);\n\t\t});\n\t}\n\n\tcalcPosition() {\n\t\tlet width = this.container.offsetWidth;\n\n\t\tthis.top = this.y - this.container.offsetHeight\n\t\t\t- TOOLTIP_POINTER_TRIANGLE_HEIGHT;\n\t\tthis.left = this.x - width/2;\n\t\tlet maxLeft = this.parent.offsetWidth - width;\n\n\t\tlet pointer = this.container.querySelector('.svg-pointer');\n\n\t\tif(this.left < 0) {\n\t\t\tpointer.style.left = `calc(50% - ${-1 * this.left}px)`;\n\t\t\tthis.left = 0;\n\t\t} else if(this.left > maxLeft) {\n\t\t\tlet delta = this.left - maxLeft;\n\t\t\tlet pointerOffset = `calc(50% + ${delta}px)`;\n\t\t\tpointer.style.left = pointerOffset;\n\n\t\t\tthis.left = maxLeft;\n\t\t} else {\n\t\t\tpointer.style.left = `50%`;\n\t\t}\n\t}\n\n\tsetValues(x, y, title = {}, listValues = [], index = -1) {\n\t\tthis.titleName = title.name;\n\t\tthis.titleValue = title.value;\n\t\tthis.listValues = listValues;\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.titleValueFirst = title.valueFirst || 0;\n\t\tthis.index = index;\n\t\tthis.refresh();\n\t}\n\n\thideTip() {\n\t\tthis.container.style.top = '0px';\n\t\tthis.container.style.left = '0px';\n\t\tthis.container.style.opacity = '0';\n\t}\n\n\tshowTip() {\n\t\tthis.container.style.top = this.top + 'px';\n\t\tthis.container.style.left = this.left + 'px';\n\t\tthis.container.style.opacity = '1';\n\t}\n}\n","import { ANGLE_RATIO } from './constants';\n\n/**\n * Returns the value of a number upto 2 decimal places.\n * @param {Number} d Any number\n */\nexport function floatTwo(d) {\n\treturn parseFloat(d.toFixed(2));\n}\n\n/**\n * Returns whether or not two given arrays are equal.\n * @param {Array} arr1 First array\n * @param {Array} arr2 Second array\n */\nexport function arraysEqual(arr1, arr2) {\n\tif(arr1.length !== arr2.length) return false;\n\tlet areEqual = true;\n\tarr1.map((d, i) => {\n\t\tif(arr2[i] !== d) areEqual = false;\n\t});\n\treturn areEqual;\n}\n\n/**\n * Shuffles array in place. ES6 version\n * @param {Array} array An array containing the items.\n */\nexport function shuffle(array) {\n\t// Awesomeness: https://bost.ocks.org/mike/shuffle/\n\t// https://stackoverflow.com/a/2450976/6495043\n\t// https://stackoverflow.com/questions/6274339/how-can-i-shuffle-an-array?noredirect=1&lq=1\n\n\tfor (let i = array.length - 1; i > 0; i--) {\n\t\tlet j = Math.floor(Math.random() * (i + 1));\n\t\t[array[i], array[j]] = [array[j], array[i]];\n\t}\n\n\treturn array;\n}\n\n/**\n * Fill an array with extra points\n * @param {Array} array Array\n * @param {Number} count number of filler elements\n * @param {Object} element element to fill with\n * @param {Boolean} start fill at start?\n */\nexport function fillArray(array, count, element, start=false) {\n\tif(!element) {\n\t\telement = start ? array[0] : array[array.length - 1];\n\t}\n\tlet fillerArray = new Array(Math.abs(count)).fill(element);\n\tarray = start ? fillerArray.concat(array) : array.concat(fillerArray);\n\treturn array;\n}\n\n/**\n * Returns pixel width of string.\n * @param {String} string\n * @param {Number} charWidth Width of single char in pixels\n */\nexport function getStringWidth(string, charWidth) {\n\treturn (string+\"\").length * charWidth;\n}\n\nexport function bindChange(obj, getFn, setFn) {\n\treturn new Proxy(obj, {\n\t\tset: function(target, prop, value) {\n\t\t\tsetFn();\n\t\t\treturn Reflect.set(target, prop, value);\n\t\t},\n\t\tget: function(target, prop) {\n\t\t\tgetFn();\n\t\t\treturn Reflect.get(target, prop);\n\t\t}\n\t});\n}\n\n// https://stackoverflow.com/a/29325222\nexport function getRandomBias(min, max, bias, influence) {\n\tconst range = max - min;\n\tconst biasValue = range * bias + min;\n\tvar rnd = Math.random() * range + min,\t\t// random in range\n\t\tmix = Math.random() * influence;\t\t// random mixer\n\treturn rnd * (1 - mix) + biasValue * mix;\t// mix full range and bias\n}\n\nexport function getPositionByAngle(angle, radius) {\n\treturn {\n\t\tx: Math.sin(angle * ANGLE_RATIO) * radius,\n\t\ty: Math.cos(angle * ANGLE_RATIO) * radius,\n\t};\n}\n\n/**\n * Check if a number is valid for svg attributes\n * @param {object} candidate Candidate to test\n * @param {Boolean} nonNegative flag to treat negative number as invalid\n */\nexport function isValidNumber(candidate, nonNegative=false) {\n\tif (Number.isNaN(candidate)) return false;\n\telse if (candidate === undefined) return false;\n\telse if (!Number.isFinite(candidate)) return false;\n\telse if (nonNegative && candidate < 0) return false;\n\telse return true;\n}\n\n/**\n * Round a number to the closes precision, max max precision 4\n * @param {Number} d Any Number\n */\nexport function round(d) {\n\t// https://floating-point-gui.de/\n\t// https://www.jacklmoore.com/notes/rounding-in-javascript/\n\treturn Number(Math.round(d + 'e4') + 'e-4');\n}\n\n/**\n * Creates a deep clone of an object\n * @param {Object} candidate Any Object\n */\n export function deepClone(candidate) {\n\tlet cloned, value, key;\n  \n\tif (candidate instanceof Date) {\n\t  return new Date(candidate.getTime());\n\t}\n  \n\tif (typeof candidate !== \"object\" || candidate === null) {\n\t  return candidate;\n\t}\n  \n\tcloned = Array.isArray(candidate) ? [] : {};\n  \n\tfor (key in candidate) {\n\t  value = candidate[key];\n  \n\t  cloned[key] = deepClone(value);\n\t}\n  \n\treturn cloned;\n  }","import { fillArray } from './helpers';\n\nexport function getBarHeightAndYAttr(yTop, zeroLine) {\n    let height, y;\n    if (yTop <= zeroLine) {\n        height = zeroLine - yTop;\n        y = yTop;\n    } else {\n        height = yTop - zeroLine;\n        y = zeroLine;\n    }\n\n    return [height, y];\n}\n\nexport function equilizeNoOfElements(\n    array1,\n    array2,\n    extraCount = array2.length - array1.length\n) {\n    // Doesn't work if either has zero elements.\n    if (extraCount > 0) {\n        array1 = fillArray(array1, extraCount);\n    } else {\n        array2 = fillArray(array2, extraCount);\n    }\n    return [array1, array2];\n}\n\nexport function truncateString(txt, len) {\n    if (!txt) {\n        return;\n    }\n    if (txt.length > len) {\n        return txt.slice(0, len - 3) + '...';\n    } else {\n        return txt;\n    }\n}\n\nexport function shortenLargeNumber(label) {\n    let number;\n    if (typeof label === 'number') number = label;\n    else if (typeof label === 'string') {\n        number = Number(label);\n        if (Number.isNaN(number)) return label;\n    }\n\n    // Using absolute since log wont work for negative numbers\n    let p = Math.floor(Math.log10(Math.abs(number)));\n    if (p <= 2) return number; // Return as is for a 3 digit number of less\n    let l = Math.floor(p / 3);\n    let shortened = Math.pow(10, p - l * 3) * +(number / Math.pow(10, p)).toFixed(1);\n\n    // Correct for floating point error upto 2 decimal places\n    return Math.round(shortened * 100) / 100 + ' ' + ['', 'K', 'M', 'B', 'T'][l];\n}\n\n// cubic bezier curve calculation (from example by François Romain)\nexport function getSplineCurvePointsStr(xList, yList) {\n    let points = [];\n    for (let i = 0; i < xList.length; i++) {\n        points.push([xList[i], yList[i]]);\n    }\n\n    let smoothing = 0.2;\n    let line = (pointA, pointB) => {\n        let lengthX = pointB[0] - pointA[0];\n        let lengthY = pointB[1] - pointA[1];\n        return {\n            length: Math.sqrt(Math.pow(lengthX, 2) + Math.pow(lengthY, 2)),\n            angle: Math.atan2(lengthY, lengthX)\n        };\n    };\n\n    let controlPoint = (current, previous, next, reverse) => {\n        let p = previous || current;\n        let n = next || current;\n        let o = line(p, n);\n        let angle = o.angle + (reverse ? Math.PI : 0);\n        let length = o.length * smoothing;\n        let x = current[0] + Math.cos(angle) * length;\n        let y = current[1] + Math.sin(angle) * length;\n        return [x, y];\n    };\n\n    let bezierCommand = (point, i, a) => {\n        let cps = controlPoint(a[i - 1], a[i - 2], point);\n        let cpe = controlPoint(point, a[i - 1], a[i + 1], true);\n        return `C ${cps[0]},${cps[1]} ${cpe[0]},${cpe[1]} ${point[0]},${point[1]}`;\n    };\n\n    let pointStr = (points, command) => {\n        return points.reduce(\n            (acc, point, i, a) =>\n                i === 0 ? `${point[0]},${point[1]}` : `${acc} ${command(point, i, a)}`,\n            ''\n        );\n    };\n\n    return pointStr(points, bezierCommand);\n}\n","const PRESET_COLOR_MAP = {\n\t'light-blue': '#7cd6fd',\n\t'blue': '#5e64ff',\n\t'violet': '#743ee2',\n\t'red': '#ff5858',\n\t'orange': '#ffa00a',\n\t'yellow': '#feef72',\n\t'green': '#28a745',\n\t'light-green': '#98d85b',\n\t'purple': '#b554ff',\n\t'magenta': '#ffa3ef',\n\t'black': '#36114C',\n\t'grey': '#bdd3e6',\n\t'light-grey': '#f0f4f7',\n\t'dark-grey': '#b8c2cc'\n};\n\nfunction limitColor(r){\n\tif (r > 255) return 255;\n\telse if (r < 0) return 0;\n\treturn r;\n}\n\nexport function lightenDarkenColor(color, amt) {\n\tlet col = getColor(color);\n\tlet usePound = false;\n\tif (col[0] == \"#\") {\n\t\tcol = col.slice(1);\n\t\tusePound = true;\n\t}\n\tlet num = parseInt(col,16);\n\tlet r = limitColor((num >> 16) + amt);\n\tlet b = limitColor(((num >> 8) & 0x00FF) + amt);\n\tlet g = limitColor((num & 0x0000FF) + amt);\n\treturn (usePound?\"#\":\"\") + (g | (b << 8) | (r << 16)).toString(16);\n}\n\nexport function isValidColor(string) {\n\t// https://stackoverflow.com/a/32685393\n\tlet HEX_RE = /(^\\s*)(#)((?:[A-Fa-f0-9]{3}){1,2})$/i;\n\tlet RGB_RE = /(^\\s*)(rgb|hsl)(a?)[(]\\s*([\\d.]+\\s*%?)\\s*,\\s*([\\d.]+\\s*%?)\\s*,\\s*([\\d.]+\\s*%?)\\s*(?:,\\s*([\\d.]+)\\s*)?[)]$/i;\n\treturn HEX_RE.test(string) || RGB_RE.test(string);\n}\n\nexport const getColor = (color) => {\n\t// When RGB color, convert to hexadecimal (alpha value is omitted)\n\tif((/rgb[a]{0,1}\\([\\d, ]+\\)/gim).test(color)) {\n\t\treturn (/\\D+(\\d*)\\D+(\\d*)\\D+(\\d*)/gim).exec(color)\n\t\t\t.map((x, i) => (i !== 0 ? Number(x).toString(16) : '#'))\n\t\t\t.reduce((c, ch) => `${c}${ch}`);\n\t}\n\treturn PRESET_COLOR_MAP[color] || color;\n};\n","import {\n    getBarHeightAndYAttr,\n    truncateString,\n    shortenLargeNumber,\n    getSplineCurvePointsStr\n} from './draw-utils';\nimport { getStringWidth, isValidNumber } from './helpers';\nimport { DOT_OVERLAY_SIZE_INCR, PERCENTAGE_BAR_DEFAULT_DEPTH } from './constants';\nimport { lightenDarkenColor } from './colors';\n\nexport const AXIS_TICK_LENGTH = 6;\nconst LABEL_MARGIN = 4;\nconst LABEL_MAX_CHARS = 15;\nexport const FONT_SIZE = 10;\nconst BASE_LINE_COLOR = '#dadada';\nconst FONT_FILL = '#555b51';\n\nfunction $(expr, con) {\n    return typeof expr === 'string' ? (con || document).querySelector(expr) : expr || null;\n}\n\nexport function createSVG(tag, o) {\n    var element = document.createElementNS('http://www.w3.org/2000/svg', tag);\n\n    for (var i in o) {\n        var val = o[i];\n\n        if (i === 'inside') {\n            $(val).appendChild(element);\n        } else if (i === 'around') {\n            var ref = $(val);\n            ref.parentNode.insertBefore(element, ref);\n            element.appendChild(ref);\n        } else if (i === 'styles') {\n            if (typeof val === 'object') {\n                Object.keys(val).map((prop) => {\n                    element.style[prop] = val[prop];\n                });\n            }\n        } else {\n            if (i === 'className') {\n                i = 'class';\n            }\n            if (i === 'innerHTML') {\n                element['textContent'] = val;\n            } else {\n                element.setAttribute(i, val);\n            }\n        }\n    }\n\n    return element;\n}\n\nfunction renderVerticalGradient(svgDefElem, gradientId) {\n    return createSVG('linearGradient', {\n        inside: svgDefElem,\n        id: gradientId,\n        x1: 0,\n        x2: 0,\n        y1: 0,\n        y2: 1\n    });\n}\n\nfunction setGradientStop(gradElem, offset, color, opacity) {\n    return createSVG('stop', {\n        inside: gradElem,\n        style: `stop-color: ${color}`,\n        offset: offset,\n        'stop-opacity': opacity\n    });\n}\n\nexport function makeSVGContainer(parent, className, width, height) {\n    return createSVG('svg', {\n        className: className,\n        inside: parent,\n        width: width,\n        height: height\n    });\n}\n\nexport function makeSVGDefs(svgContainer) {\n    return createSVG('defs', {\n        inside: svgContainer\n    });\n}\n\nexport function makeSVGGroup(className, transform = '', parent = undefined) {\n    let args = {\n        className: className,\n        transform: transform\n    };\n    if (parent) args.inside = parent;\n    return createSVG('g', args);\n}\n\nexport function wrapInSVGGroup(elements, className = '') {\n    let g = createSVG('g', {\n        className: className\n    });\n    elements.forEach((e) => g.appendChild(e));\n    return g;\n}\n\nexport function makePath(\n    pathStr,\n    className = '',\n    stroke = 'none',\n    fill = 'none',\n    strokeWidth = 2\n) {\n    return createSVG('path', {\n        className: className,\n        d: pathStr,\n        styles: {\n            stroke: stroke,\n            fill: fill,\n            'stroke-width': strokeWidth\n        }\n    });\n}\n\nexport function makeArcPathStr(\n    startPosition,\n    endPosition,\n    center,\n    radius,\n    clockWise = 1,\n    largeArc = 0\n) {\n    let [arcStartX, arcStartY] = [center.x + startPosition.x, center.y + startPosition.y];\n    let [arcEndX, arcEndY] = [center.x + endPosition.x, center.y + endPosition.y];\n    return `M${center.x} ${center.y}\n\t\tL${arcStartX} ${arcStartY}\n\t\tA ${radius} ${radius} 0 ${largeArc} ${clockWise ? 1 : 0}\n\t\t${arcEndX} ${arcEndY} z`;\n}\n\nexport function makeCircleStr(\n    startPosition,\n    endPosition,\n    center,\n    radius,\n    clockWise = 1,\n    largeArc = 0\n) {\n    let [arcStartX, arcStartY] = [center.x + startPosition.x, center.y + startPosition.y];\n    let [arcEndX, midArc, arcEndY] = [\n        center.x + endPosition.x,\n        center.y * 2,\n        center.y + endPosition.y\n    ];\n    return `M${center.x} ${center.y}\n\t\tL${arcStartX} ${arcStartY}\n\t\tA ${radius} ${radius} 0 ${largeArc} ${clockWise ? 1 : 0}\n\t\t${arcEndX} ${midArc} z\n\t\tL${arcStartX} ${midArc}\n\t\tA ${radius} ${radius} 0 ${largeArc} ${clockWise ? 1 : 0}\n\t\t${arcEndX} ${arcEndY} z`;\n}\n\nexport function makeArcStrokePathStr(\n    startPosition,\n    endPosition,\n    center,\n    radius,\n    clockWise = 1,\n    largeArc = 0\n) {\n    let [arcStartX, arcStartY] = [center.x + startPosition.x, center.y + startPosition.y];\n    let [arcEndX, arcEndY] = [center.x + endPosition.x, center.y + endPosition.y];\n\n    return `M${arcStartX} ${arcStartY}\n\t\tA ${radius} ${radius} 0 ${largeArc} ${clockWise ? 1 : 0}\n\t\t${arcEndX} ${arcEndY}`;\n}\n\nexport function makeStrokeCircleStr(\n    startPosition,\n    endPosition,\n    center,\n    radius,\n    clockWise = 1,\n    largeArc = 0\n) {\n    let [arcStartX, arcStartY] = [center.x + startPosition.x, center.y + startPosition.y];\n    let [arcEndX, midArc, arcEndY] = [\n        center.x + endPosition.x,\n        radius * 2 + arcStartY,\n        center.y + startPosition.y\n    ];\n\n    return `M${arcStartX} ${arcStartY}\n\t\tA ${radius} ${radius} 0 ${largeArc} ${clockWise ? 1 : 0}\n\t\t${arcEndX} ${midArc}\n\t\tM${arcStartX} ${midArc}\n\t\tA ${radius} ${radius} 0 ${largeArc} ${clockWise ? 1 : 0}\n\t\t${arcEndX} ${arcEndY}`;\n}\n\nexport function makeGradient(svgDefElem, color, lighter = false) {\n    let gradientId =\n        'path-fill-gradient' + '-' + color + '-' + (lighter ? 'lighter' : 'default');\n    let gradientDef = renderVerticalGradient(svgDefElem, gradientId);\n    let opacities = [1, 0.6, 0.2];\n    if (lighter) {\n        opacities = [0.4, 0.2, 0];\n    }\n\n    setGradientStop(gradientDef, '0%', color, opacities[0]);\n    setGradientStop(gradientDef, '50%', color, opacities[1]);\n    setGradientStop(gradientDef, '100%', color, opacities[2]);\n\n    return gradientId;\n}\n\nexport function percentageBar(\n    x,\n    y,\n    width,\n    height,\n    depth = PERCENTAGE_BAR_DEFAULT_DEPTH,\n    fill = 'none'\n) {\n    let args = {\n        className: 'percentage-bar',\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        fill: fill,\n        styles: {\n            stroke: lightenDarkenColor(fill, -25),\n            // Diabolically good: https://stackoverflow.com/a/9000859\n            // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray\n            'stroke-dasharray': `0, ${height + width}, ${width}, ${height}`,\n            'stroke-width': depth\n        }\n    };\n\n    return createSVG('rect', args);\n}\n\nexport function heatSquare(className, x, y, size, radius, fill = 'none', data = {}) {\n    let args = {\n        className: className,\n        x: x,\n        y: y,\n        width: size,\n        height: size,\n        rx: radius,\n        fill: fill\n    };\n\n    Object.keys(data).map((key) => {\n        args[key] = data[key];\n    });\n\n    return createSVG('rect', args);\n}\n\nexport function legendBar(x, y, size, fill = 'none', label, truncate = false) {\n    label = truncate ? truncateString(label, LABEL_MAX_CHARS) : label;\n\n    let args = {\n        className: 'legend-bar',\n        x: 0,\n        y: 0,\n        width: size,\n        height: '2px',\n        fill: fill\n    };\n    let text = createSVG('text', {\n        className: 'legend-dataset-text',\n        x: 0,\n        y: 0,\n        dy: FONT_SIZE * 2 + 'px',\n        'font-size': FONT_SIZE * 1.2 + 'px',\n        'text-anchor': 'start',\n        fill: FONT_FILL,\n        innerHTML: label\n    });\n\n    let group = createSVG('g', {\n        transform: `translate(${x}, ${y})`\n    });\n    group.appendChild(createSVG('rect', args));\n    group.appendChild(text);\n\n    return group;\n}\n\nexport function legendDot(x, y, size, fill = 'none', label, truncate = false) {\n    label = truncate ? truncateString(label, LABEL_MAX_CHARS) : label;\n\n    let args = {\n        className: 'legend-dot',\n        cx: 0,\n        cy: 0,\n        r: size,\n        fill: fill\n    };\n    let text = createSVG('text', {\n        className: 'legend-dataset-text',\n        x: 0,\n        y: 0,\n        dx: FONT_SIZE + 'px',\n        dy: FONT_SIZE / 3 + 'px',\n        'font-size': FONT_SIZE * 1.2 + 'px',\n        'text-anchor': 'start',\n        fill: FONT_FILL,\n        innerHTML: label\n    });\n\n    let group = createSVG('g', {\n        transform: `translate(${x}, ${y})`\n    });\n    group.appendChild(createSVG('circle', args));\n    group.appendChild(text);\n\n    return group;\n}\n\nexport function makeText(className, x, y, content, options = {}) {\n    let fontSize = options.fontSize || FONT_SIZE;\n    let dy = options.dy !== undefined ? options.dy : fontSize / 2;\n    let fill = options.fill || FONT_FILL;\n    let textAnchor = options.textAnchor || 'start';\n    return createSVG('text', {\n        className: className,\n        x: x,\n        y: y,\n        dy: dy + 'px',\n        'font-size': fontSize + 'px',\n        fill: fill,\n        'text-anchor': textAnchor,\n        innerHTML: content\n    });\n}\n\nfunction makeVertLine(x, label, y1, y2, options = {}) {\n    if (!options.stroke) options.stroke = BASE_LINE_COLOR;\n    let l = createSVG('line', {\n        className: 'line-vertical ' + options.className,\n        x1: 0,\n        x2: 0,\n        y1: y1,\n        y2: y2,\n        styles: {\n            stroke: options.stroke\n        }\n    });\n\n    let text = createSVG('text', {\n        x: 0,\n        y: y1 > y2 ? y1 + LABEL_MARGIN : y1 - LABEL_MARGIN - FONT_SIZE,\n        dy: FONT_SIZE + 'px',\n        'font-size': FONT_SIZE + 'px',\n        'text-anchor': 'middle',\n        innerHTML: label + ''\n    });\n\n    let line = createSVG('g', {\n        transform: `translate(${x}, 0)`\n    });\n\n    line.appendChild(l);\n    line.appendChild(text);\n\n    return line;\n}\n\nfunction makeHoriLine(y, label, x1, x2, options = {}) {\n    if (!options.stroke) options.stroke = BASE_LINE_COLOR;\n    if (!options.lineType) options.lineType = '';\n    if (!options.alignment) options.alignment = 'left';\n    if (options.shortenNumbers) label = shortenLargeNumber(label);\n\n    let className =\n        'line-horizontal ' +\n        options.className +\n        (options.lineType === 'dashed' ? 'dashed' : '');\n\n    let l = createSVG('line', {\n        className: className,\n        x1: x1,\n        x2: x2,\n        y1: 0,\n        y2: 0,\n        styles: {\n            stroke: options.stroke\n        }\n    });\n\n    let text = createSVG('text', {\n        x: options.alignment === 'left' ? x1 - LABEL_MARGIN : x2 + LABEL_MARGIN * 4,\n        y: 0,\n        dy: FONT_SIZE / 2 - 2 + 'px',\n        'font-size': FONT_SIZE + 'px',\n        'text-anchor': x1 < x2 ? 'end' : 'start',\n        innerHTML: label + ''\n    });\n\n    let line = createSVG('g', {\n        transform: `translate(0, ${y})`,\n        'stroke-opacity': 1\n    });\n\n    if (text === 0 || text === '0') {\n        line.style.stroke = 'rgba(27, 31, 35, 0.6)';\n    }\n\n    line.appendChild(l);\n    line.appendChild(text);\n\n    return line;\n}\n\nexport function generateAxisLabel(options) {\n    if (!options.title) return;\n\n    const x = options.position === 'left' ? LABEL_MARGIN : options.width;\n    // - getStringWidth(options.title, 5);\n    const rotation =\n        options.position === 'right'\n            ? `rotate(90, ${options.width}, ${options.height / 2})`\n            : `rotate(270, 0, ${options.height / 2})`;\n\n    const labelSvg = createSVG('text', {\n        className: 'chart-label',\n        x: x - getStringWidth(options.title, 5) / 2,\n        y: options.height / 2 - LABEL_MARGIN,\n        dy: FONT_SIZE / -2 + 'px',\n        'font-size': FONT_SIZE + 'px',\n        'text-anchor': 'start',\n        transform: rotation,\n        innerHTML: options.title + ''\n    });\n\n    return labelSvg;\n}\n\nexport function yLine(y, label, width, options = {}) {\n    if (!isValidNumber(y)) y = 0;\n\n    if (!options.pos) options.pos = 'left';\n    if (!options.offset) options.offset = 0;\n    if (!options.mode) options.mode = 'span';\n    if (!options.stroke) options.stroke = BASE_LINE_COLOR;\n    if (!options.className) options.className = '';\n\n    let x1 = -1 * AXIS_TICK_LENGTH;\n    let x2 = options.mode === 'span' ? width + AXIS_TICK_LENGTH : 0;\n\n    if (options.mode === 'tick' && options.pos === 'right') {\n        x1 = width + AXIS_TICK_LENGTH;\n        x2 = width;\n    }\n\n    let offset = options.pos === 'left' ? -1 * options.offset : options.offset;\n\n    x1 += offset;\n    x2 += offset;\n\n    return makeHoriLine(y, label, x1, x2, {\n        stroke: options.stroke,\n        className: options.className,\n        lineType: options.lineType,\n        alignment: options.pos,\n        shortenNumbers: options.shortenNumbers\n    });\n}\n\nexport function xLine(x, label, height, options = {}) {\n    if (!isValidNumber(x)) x = 0;\n\n    if (!options.pos) options.pos = 'bottom';\n    if (!options.offset) options.offset = 0;\n    if (!options.mode) options.mode = 'span';\n    if (!options.stroke) options.stroke = BASE_LINE_COLOR;\n    if (!options.className) options.className = '';\n\n    // Draw X axis line in span/tick mode with optional label\n    //                        \ty2(span)\n    // \t\t\t\t\t\t|\n    // \t\t\t\t\t\t|\n    //\t\t\t\tx line\t|\n    //\t\t\t\t\t\t|\n    // \t\t\t\t\t   \t|\n    // ---------------------+-- y2(tick)\n    //\t\t\t\t\t\t|\n    //\t\t\t\t\t\t\ty1\n\n    let y1 = height + AXIS_TICK_LENGTH;\n    let y2 = options.mode === 'span' ? -1 * AXIS_TICK_LENGTH : height;\n\n    if (options.mode === 'tick' && options.pos === 'top') {\n        // top axis ticks\n        y1 = -1 * AXIS_TICK_LENGTH;\n        y2 = 0;\n    }\n\n    return makeVertLine(x, label, y1, y2, {\n        stroke: options.stroke,\n        className: options.className,\n        lineType: options.lineType\n    });\n}\n\nexport function yMarker(y, label, width, options = {}) {\n    if (!options.labelPos) options.labelPos = 'right';\n    let x =\n        options.labelPos === 'left'\n            ? LABEL_MARGIN\n            : width - getStringWidth(label, 5) - LABEL_MARGIN;\n\n    let labelSvg = createSVG('text', {\n        className: 'chart-label',\n        x: x,\n        y: 0,\n        dy: FONT_SIZE / -2 + 'px',\n        'font-size': FONT_SIZE + 'px',\n        'text-anchor': 'start',\n        innerHTML: label + ''\n    });\n\n    let line = makeHoriLine(y, '', 0, width, {\n        stroke: options.stroke || BASE_LINE_COLOR,\n        className: options.className || '',\n        lineType: options.lineType\n    });\n\n    line.appendChild(labelSvg);\n\n    return line;\n}\n\nexport function yRegion(y1, y2, width, label, options = {}) {\n    // return a group\n    let height = y1 - y2;\n\n    let rect = createSVG('rect', {\n        className: `bar mini`, // remove class\n        styles: {\n            fill: `rgba(228, 234, 239, 0.49)`,\n            stroke: BASE_LINE_COLOR,\n            'stroke-dasharray': `${width}, ${height}`\n        },\n        // 'data-point-index': index,\n        x: 0,\n        y: 0,\n        width: width,\n        height: height\n    });\n\n    if (!options.labelPos) options.labelPos = 'right';\n    let x =\n        options.labelPos === 'left'\n            ? LABEL_MARGIN\n            : width - getStringWidth(label + '', 4.5) - LABEL_MARGIN;\n\n    let labelSvg = createSVG('text', {\n        className: 'chart-label',\n        x: x,\n        y: 0,\n        dy: FONT_SIZE / -2 + 'px',\n        'font-size': FONT_SIZE + 'px',\n        'text-anchor': 'start',\n        innerHTML: label + ''\n    });\n\n    let region = createSVG('g', {\n        transform: `translate(0, ${y2})`\n    });\n\n    region.appendChild(rect);\n    region.appendChild(labelSvg);\n\n    return region;\n}\n\nexport function datasetBar(\n    x,\n    yTop,\n    width,\n    color,\n    label = '',\n    index = 0,\n    offset = 0,\n    meta = {}\n) {\n    let [height, y] = getBarHeightAndYAttr(yTop, meta.zeroLine);\n    y -= offset;\n\n    if (height === 0) {\n        height = meta.minHeight;\n        y -= meta.minHeight;\n    }\n\n    // Preprocess numbers to avoid svg building errors\n    if (!isValidNumber(x)) x = 0;\n    if (!isValidNumber(y)) y = 0;\n    if (!isValidNumber(height, true)) height = 0;\n    if (!isValidNumber(width, true)) width = 0;\n\n    let rect = createSVG('rect', {\n        className: `bar mini`,\n        style: `fill: ${color}`,\n        'data-point-index': index,\n        x: x,\n        y: y,\n        width: width,\n        height: height\n    });\n\n    label += '';\n\n    if (!label && !label.length) {\n        return rect;\n    } else {\n        rect.setAttribute('y', 0);\n        rect.setAttribute('x', 0);\n        let text = createSVG('text', {\n            className: 'data-point-value',\n            x: width / 2,\n            y: 0,\n            dy: (FONT_SIZE / 2) * -1 + 'px',\n            'font-size': FONT_SIZE + 'px',\n            'text-anchor': 'middle',\n            innerHTML: label\n        });\n\n        let group = createSVG('g', {\n            'data-point-index': index,\n            transform: `translate(${x}, ${y})`\n        });\n        group.appendChild(rect);\n        group.appendChild(text);\n\n        return group;\n    }\n}\n\nexport function datasetDot(x, y, radius, color, label = '', index = 0) {\n    let dot = createSVG('circle', {\n        style: `fill: ${color}`,\n        'data-point-index': index,\n        cx: x,\n        cy: y,\n        r: radius\n    });\n\n    label += '';\n\n    if (!label && !label.length) {\n        return dot;\n    } else {\n        dot.setAttribute('cy', 0);\n        dot.setAttribute('cx', 0);\n\n        let text = createSVG('text', {\n            className: 'data-point-value',\n            x: 0,\n            y: 0,\n            dy: (FONT_SIZE / 2) * -1 - radius + 'px',\n            'font-size': FONT_SIZE + 'px',\n            'text-anchor': 'middle',\n            innerHTML: label\n        });\n\n        let group = createSVG('g', {\n            'data-point-index': index,\n            transform: `translate(${x}, ${y})`\n        });\n        group.appendChild(dot);\n        group.appendChild(text);\n\n        return group;\n    }\n}\n\nexport function getPaths(xList, yList, color, options = {}, meta = {}) {\n    let pointsList = yList.map((y, i) => xList[i] + ',' + y);\n    let pointsStr = pointsList.join('L');\n\n    // Spline\n    if (options.spline) pointsStr = getSplineCurvePointsStr(xList, yList);\n\n    let path = makePath('M' + pointsStr, 'line-graph-path', color);\n\n    // HeatLine\n    if (options.heatline) {\n        let gradient_id = makeGradient(meta.svgDefs, color);\n        path.style.stroke = `url(#${gradient_id})`;\n    }\n\n    let paths = {\n        path: path\n    };\n\n    // Region\n    if (options.regionFill) {\n        let gradient_id_region = makeGradient(meta.svgDefs, color, true);\n\n        let pathStr =\n            'M' +\n            `${xList[0]},${meta.zeroLine}L` +\n            pointsStr +\n            `L${xList.slice(-1)[0]},${meta.zeroLine}`;\n        paths.region = makePath(pathStr, `region-fill`, 'none', `url(#${gradient_id_region})`);\n    }\n\n    return paths;\n}\n\nexport let makeOverlay = {\n    bar: (unit) => {\n        let transformValue;\n        if (unit.nodeName !== 'rect') {\n            transformValue = unit.getAttribute('transform');\n            unit = unit.childNodes[0];\n        }\n        let overlay = unit.cloneNode();\n        overlay.style.fill = '#000000';\n        overlay.style.opacity = '0.4';\n\n        if (transformValue) {\n            overlay.setAttribute('transform', transformValue);\n        }\n        return overlay;\n    },\n\n    dot: (unit) => {\n        let transformValue;\n        if (unit.nodeName !== 'circle') {\n            transformValue = unit.getAttribute('transform');\n            unit = unit.childNodes[0];\n        }\n        let overlay = unit.cloneNode();\n        let radius = unit.getAttribute('r');\n        let fill = unit.getAttribute('fill');\n        overlay.setAttribute('r', parseInt(radius) + DOT_OVERLAY_SIZE_INCR);\n        overlay.setAttribute('fill', fill);\n        overlay.style.opacity = '0.6';\n\n        if (transformValue) {\n            overlay.setAttribute('transform', transformValue);\n        }\n        return overlay;\n    },\n\n    heat_square: (unit) => {\n        let transformValue;\n        if (unit.nodeName !== 'circle') {\n            transformValue = unit.getAttribute('transform');\n            unit = unit.childNodes[0];\n        }\n        let overlay = unit.cloneNode();\n        let radius = unit.getAttribute('r');\n        let fill = unit.getAttribute('fill');\n        overlay.setAttribute('r', parseInt(radius) + DOT_OVERLAY_SIZE_INCR);\n        overlay.setAttribute('fill', fill);\n        overlay.style.opacity = '0.6';\n\n        if (transformValue) {\n            overlay.setAttribute('transform', transformValue);\n        }\n        return overlay;\n    }\n};\n\nexport let updateOverlay = {\n    bar: (unit, overlay) => {\n        let transformValue;\n        if (unit.nodeName !== 'rect') {\n            transformValue = unit.getAttribute('transform');\n            unit = unit.childNodes[0];\n        }\n        let attributes = ['x', 'y', 'width', 'height'];\n        Object.values(unit.attributes)\n            .filter((attr) => attributes.includes(attr.name) && attr.specified)\n            .map((attr) => {\n                overlay.setAttribute(attr.name, attr.nodeValue);\n            });\n\n        if (transformValue) {\n            overlay.setAttribute('transform', transformValue);\n        }\n    },\n\n    dot: (unit, overlay) => {\n        let transformValue;\n        if (unit.nodeName !== 'circle') {\n            transformValue = unit.getAttribute('transform');\n            unit = unit.childNodes[0];\n        }\n        let attributes = ['cx', 'cy'];\n        Object.values(unit.attributes)\n            .filter((attr) => attributes.includes(attr.name) && attr.specified)\n            .map((attr) => {\n                overlay.setAttribute(attr.name, attr.nodeValue);\n            });\n\n        if (transformValue) {\n            overlay.setAttribute('transform', transformValue);\n        }\n    },\n\n    heat_square: (unit, overlay) => {\n        let transformValue;\n        if (unit.nodeName !== 'circle') {\n            transformValue = unit.getAttribute('transform');\n            unit = unit.childNodes[0];\n        }\n        let attributes = ['cx', 'cy'];\n        Object.values(unit.attributes)\n            .filter((attr) => attributes.includes(attr.name) && attr.specified)\n            .map((attr) => {\n                overlay.setAttribute(attr.name, attr.nodeValue);\n            });\n\n        if (transformValue) {\n            overlay.setAttribute('transform', transformValue);\n        }\n    }\n};\n","import { getBarHeightAndYAttr, getSplineCurvePointsStr } from './draw-utils';\n\nexport const UNIT_ANIM_DUR = 350;\nexport const PATH_ANIM_DUR = 350;\nexport const MARKER_LINE_ANIM_DUR = UNIT_ANIM_DUR;\nexport const REPLACE_ALL_NEW_DUR = 250;\n\nexport const STD_EASING = 'easein';\n\nexport function translate(unit, oldCoord, newCoord, duration) {\n\tlet old = typeof oldCoord === 'string' ? oldCoord : oldCoord.join(', ');\n\treturn [\n\t\tunit,\n\t\t{transform: newCoord.join(', ')},\n\t\tduration,\n\t\tSTD_EASING,\n\t\t\"translate\",\n\t\t{transform: old}\n\t];\n}\n\nexport function translateVertLine(xLine, newX, oldX) {\n\treturn translate(xLine, [oldX, 0], [newX, 0], MARKER_LINE_ANIM_DUR);\n}\n\nexport function translateHoriLine(yLine, newY, oldY) {\n\treturn translate(yLine, [0, oldY], [0, newY], MARKER_LINE_ANIM_DUR);\n}\n\nexport function animateRegion(rectGroup, newY1, newY2, oldY2) {\n\tlet newHeight = newY1 - newY2;\n\tlet rect = rectGroup.childNodes[0];\n\tlet width = rect.getAttribute(\"width\");\n\tlet rectAnim = [\n\t\trect,\n\t\t{ height: newHeight, 'stroke-dasharray': `${width}, ${newHeight}` },\n\t\tMARKER_LINE_ANIM_DUR,\n\t\tSTD_EASING\n\t];\n\n\tlet groupAnim = translate(rectGroup, [0, oldY2], [0, newY2], MARKER_LINE_ANIM_DUR);\n\treturn [rectAnim, groupAnim];\n}\n\nexport function animateBar(bar, x, yTop, width, offset=0, meta={}) {\n\tlet [height, y] = getBarHeightAndYAttr(yTop, meta.zeroLine);\n\ty -= offset;\n\tif(bar.nodeName !== 'rect') {\n\t\tlet rect = bar.childNodes[0];\n\t\tlet rectAnim = [\n\t\t\trect,\n\t\t\t{width: width, height: height},\n\t\t\tUNIT_ANIM_DUR,\n\t\t\tSTD_EASING\n\t\t];\n\n\t\tlet oldCoordStr = bar.getAttribute(\"transform\").split(\"(\")[1].slice(0, -1);\n\t\tlet groupAnim = translate(bar, oldCoordStr, [x, y], MARKER_LINE_ANIM_DUR);\n\t\treturn [rectAnim, groupAnim];\n\t} else {\n\t\treturn [[bar, {width: width, height: height, x: x, y: y}, UNIT_ANIM_DUR, STD_EASING]];\n\t}\n\t// bar.animate({height: args.newHeight, y: yTop}, UNIT_ANIM_DUR, mina.easein);\n}\n\nexport function animateDot(dot, x, y) {\n\tif(dot.nodeName !== 'circle') {\n\t\tlet oldCoordStr = dot.getAttribute(\"transform\").split(\"(\")[1].slice(0, -1);\n\t\tlet groupAnim = translate(dot, oldCoordStr, [x, y], MARKER_LINE_ANIM_DUR);\n\t\treturn [groupAnim];\n\t} else {\n\t\treturn [[dot, {cx: x, cy: y}, UNIT_ANIM_DUR, STD_EASING]];\n\t}\n\t// dot.animate({cy: yTop}, UNIT_ANIM_DUR, mina.easein);\n}\n\nexport function animatePath(paths, newXList, newYList, zeroLine, spline) {\n\tlet pathComponents = [];\n\tlet pointsStr = newYList.map((y, i) => (newXList[i] + ',' + y)).join(\"L\");\n\n\tif (spline)\n\t\tpointsStr = getSplineCurvePointsStr(newXList, newYList);\n\n\tconst animPath = [paths.path, {d:\"M\" + pointsStr}, PATH_ANIM_DUR, STD_EASING];\n\tpathComponents.push(animPath);\n\n\tif(paths.region) {\n\t\tlet regStartPt = `${newXList[0]},${zeroLine}L`;\n\t\tlet regEndPt = `L${newXList.slice(-1)[0]}, ${zeroLine}`;\n\n\t\tconst animRegion = [\n\t\t\tpaths.region,\n\t\t\t{d:\"M\" + regStartPt + pointsStr + regEndPt},\n\t\t\tPATH_ANIM_DUR,\n\t\t\tSTD_EASING\n\t\t];\n\t\tpathComponents.push(animRegion);\n\t}\n\n\treturn pathComponents;\n}\n\nexport function animatePathStr(oldPath, pathStr) {\n\treturn [oldPath, {d: pathStr}, UNIT_ANIM_DUR, STD_EASING];\n}\n","// Leveraging SMIL Animations\n\nimport { REPLACE_ALL_NEW_DUR } from './animate';\n\nconst EASING = {\n\tease: \"0.25 0.1 0.25 1\",\n\tlinear: \"0 0 1 1\",\n\t// easein: \"0.42 0 1 1\",\n\teasein: \"0.1 0.8 0.2 1\",\n\teaseout: \"0 0 0.58 1\",\n\teaseinout: \"0.42 0 0.58 1\"\n};\n\nfunction animateSVGElement(element, props, dur, easingType=\"linear\", type=undefined, oldValues={}) {\n\n\tlet animElement = element.cloneNode(true);\n\tlet newElement = element.cloneNode(true);\n\n\tfor(var attributeName in props) {\n\t\tlet animateElement;\n\t\tif(attributeName === 'transform') {\n\t\t\tanimateElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"animateTransform\");\n\t\t} else {\n\t\t\tanimateElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"animate\");\n\t\t}\n\t\tlet currentValue = oldValues[attributeName] || element.getAttribute(attributeName);\n\t\tlet value = props[attributeName];\n\n\t\tlet animAttr = {\n\t\t\tattributeName: attributeName,\n\t\t\tfrom: currentValue,\n\t\t\tto: value,\n\t\t\tbegin: \"0s\",\n\t\t\tdur: dur/1000 + \"s\",\n\t\t\tvalues: currentValue + \";\" + value,\n\t\t\tkeySplines: EASING[easingType],\n\t\t\tkeyTimes: \"0;1\",\n\t\t\tcalcMode: \"spline\",\n\t\t\tfill: 'freeze'\n\t\t};\n\n\t\tif(type) {\n\t\t\tanimAttr[\"type\"] = type;\n\t\t}\n\n\t\tfor (var i in animAttr) {\n\t\t\tanimateElement.setAttribute(i, animAttr[i]);\n\t\t}\n\n\t\tanimElement.appendChild(animateElement);\n\n\t\tif(type) {\n\t\t\tnewElement.setAttribute(attributeName, `translate(${value})`);\n\t\t} else {\n\t\t\tnewElement.setAttribute(attributeName, value);\n\t\t}\n\t}\n\n\treturn [animElement, newElement];\n}\n\nexport function transform(element, style) { // eslint-disable-line no-unused-vars\n\telement.style.transform = style;\n\telement.style.webkitTransform = style;\n\telement.style.msTransform = style;\n\telement.style.mozTransform = style;\n\telement.style.oTransform = style;\n}\n\nfunction animateSVG(svgContainer, elements) {\n\tlet newElements = [];\n\tlet animElements = [];\n\n\telements.map(element => {\n\t\tlet unit = element[0];\n\t\tlet parent = unit.parentNode;\n\n\t\tlet animElement, newElement;\n\n\t\telement[0] = unit;\n\t\t[animElement, newElement] = animateSVGElement(...element);\n\n\t\tnewElements.push(newElement);\n\t\tanimElements.push([animElement, parent]);\n\t\t\n\t\tif (parent) {\n\t\t\tparent.replaceChild(animElement, unit);\n\t\t}\n\t});\n\n\tlet animSvg = svgContainer.cloneNode(true);\n\n\tanimElements.map((animElement, i) => {\n\t\tif (animElement[1]) {\n\t\t\tanimElement[1].replaceChild(newElements[i], animElement[0]);\n\t\t\telements[i][0] = newElements[i];\n\t\t}\n\t});\n\n\treturn animSvg;\n}\n\nexport function runSMILAnimation(parent, svgElement, elementsToAnimate) {\n\tif(elementsToAnimate.length === 0) return;\n\n\tlet animSvgElement = animateSVG(svgElement, elementsToAnimate);\n\tif(svgElement.parentNode == parent) {\n\t\tparent.removeChild(svgElement);\n\t\tparent.appendChild(animSvgElement);\n\n\t}\n\n\t// Replace the new svgElement (data has already been replaced)\n\tsetTimeout(() => {\n\t\tif(animSvgElement.parentNode == parent) {\n\t\t\tparent.removeChild(animSvgElement);\n\t\t\tparent.appendChild(svgElement);\n\t\t}\n\t}, REPLACE_ALL_NEW_DUR);\n}\n","export const CSSTEXT = \".chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ul{padding-left:0;display:flex}.graph-svg-tip ol{padding-left:0;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:' ';border:5px solid transparent;border-top-color:rgba(0,0,0,.8)}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}\";","import { $ } from '../utils/dom';\nimport { CSSTEXT } from '../../css/chartsCss';\n\nexport function downloadFile(filename, data) {\n\tvar a = document.createElement('a');\n\ta.style = \"display: none\";\n\tvar blob = new Blob(data, {type: \"image/svg+xml; charset=utf-8\"});\n\tvar url = window.URL.createObjectURL(blob);\n\ta.href = url;\n\ta.download = filename;\n\tdocument.body.appendChild(a);\n\ta.click();\n\tsetTimeout(function(){\n\t\tdocument.body.removeChild(a);\n\t\twindow.URL.revokeObjectURL(url);\n\t}, 300);\n}\n\nexport function prepareForExport(svg) {\n\tlet clone = svg.cloneNode(true);\n\tclone.classList.add('chart-container');\n\tclone.setAttribute('xmlns', \"http://www.w3.org/2000/svg\");\n\tclone.setAttribute('xmlns:xlink', \"http://www.w3.org/1999/xlink\");\n\tlet styleEl = $.create('style', {\n\t\t'innerHTML': CSSTEXT\n\t});\n\tclone.insertBefore(styleEl, clone.firstChild);\n\n\tlet container = $.create('div');\n\tcontainer.appendChild(clone);\n\n\treturn container.innerHTML;\n}\n","import SvgTip from '../objects/SvgTip';\nimport { $, isElementInViewport, getElementContentWidth, isHidden } from '../utils/dom';\nimport { makeSVGContainer, makeSVGDefs, makeSVGGroup, makeText } from '../utils/draw';\nimport {\n    BASE_MEASURES,\n    getExtraHeight,\n    getExtraWidth,\n    getTopOffset,\n    getLeftOffset,\n    INIT_CHART_UPDATE_TIMEOUT,\n    CHART_POST_ANIMATE_TIMEOUT,\n    DEFAULT_COLORS\n} from '../utils/constants';\nimport { getColor, isValidColor } from '../utils/colors';\nimport { runSMILAnimation } from '../utils/animation';\nimport { downloadFile, prepareForExport } from '../utils/export';\nimport { deepClone } from '../utils/helpers';\n\nexport default class BaseChart {\n    constructor(parent, options) {\n        // deepclone options to avoid making changes to orignal object\n        options = deepClone(options);\n\n        this.parent = typeof parent === 'string' ? document.querySelector(parent) : parent;\n\n        if (!(this.parent instanceof HTMLElement)) {\n            throw new Error('No `parent` element to render on was provided.');\n        }\n\n        this.rawChartArgs = options;\n\n        this.title = options.title || '';\n        this.type = options.type || '';\n\n        this.realData = this.prepareData(options.data);\n        this.data = this.prepareFirstData(this.realData);\n\n        console.log('BaseChart', this.realData, this.data);\n        this.colors = this.validateColors(options.colors, this.type);\n\n        this.config = {\n            showTooltip: 1, // calculate\n            showLegend: 1, // calculate\n            isNavigable: options.isNavigable || 0,\n            animate: typeof options.animate !== 'undefined' ? options.animate : 1,\n            truncateLegends: options.truncateLegends || 1\n        };\n\n        this.measures = JSON.parse(JSON.stringify(BASE_MEASURES));\n        let m = this.measures;\n        this.setMeasures(options);\n        if (!this.title.length) {\n            m.titleHeight = 0;\n        }\n        if (!this.config.showLegend) m.legendHeight = 0;\n        this.argHeight = options.height || m.baseHeight;\n\n        this.state = {};\n        this.options = {};\n\n        this.initTimeout = INIT_CHART_UPDATE_TIMEOUT;\n\n        if (this.config.isNavigable) {\n            this.overlays = [];\n        }\n\n        this.configure(options);\n    }\n\n    prepareData(data) {\n        return data;\n    }\n\n    prepareFirstData(data) {\n        return data;\n    }\n\n    validateColors(colors, type) {\n        const validColors = [];\n        colors = (colors || []).concat(DEFAULT_COLORS[type]);\n        colors.forEach((string) => {\n            const color = getColor(string);\n            if (!isValidColor(color)) {\n                console.warn('\"' + string + '\" is not a valid color.');\n            } else {\n                validColors.push(color);\n            }\n        });\n        return validColors;\n    }\n\n    setMeasures() {\n        // Override measures, including those for title and legend\n        // set config for legend and title\n    }\n\n    configure() {\n        let height = this.argHeight;\n        this.baseHeight = height;\n        this.height = height - getExtraHeight(this.measures);\n\n        // Bind window events\n        this.boundDrawFn = () => this.draw(true);\n        if (ResizeObserver) {\n            this.resizeObserver = new ResizeObserver(this.boundDrawFn);\n            this.resizeObserver.observe(this.parent);\n        }\n        window.addEventListener('resize', this.boundDrawFn);\n        window.addEventListener('orientationchange', this.boundDrawFn);\n    }\n\n    destroy() {\n        if (this.resizeObserver) this.resizeObserver.disconnect();\n        window.removeEventListener('resize', this.boundDrawFn);\n        window.removeEventListener('orientationchange', this.boundDrawFn);\n    }\n\n    // Has to be called manually\n    setup() {\n        this.makeContainer();\n        this.updateWidth();\n        this.makeTooltip();\n\n        this.draw(false, true);\n    }\n\n    makeContainer() {\n        // Chart needs a dedicated parent element\n        this.parent.innerHTML = '';\n\n        let args = {\n            inside: this.parent,\n            className: 'chart-container'\n        };\n\n        if (this.independentWidth) {\n            args.styles = { width: this.independentWidth + 'px' };\n        }\n\n        this.container = $.create('div', args);\n    }\n\n    makeTooltip() {\n        this.tip = new SvgTip({\n            parent: this.container,\n            colors: this.colors\n        });\n        this.bindTooltip();\n    }\n\n    bindTooltip() {}\n\n    draw(onlyWidthChange = false, init = false) {\n        if (onlyWidthChange && isHidden(this.parent)) {\n            // Don't update anything if the chart is hidden\n            return;\n        }\n        this.updateWidth();\n\n        this.calc(onlyWidthChange);\n        this.makeChartArea();\n        this.setupComponents();\n\n        this.components.forEach((c) => c.setup(this.drawArea));\n        // this.components.forEach(c => c.make());\n        this.render(this.components, false);\n\n        if (init) {\n            this.data = this.realData;\n            setTimeout(() => {\n                this.update(this.data);\n            }, this.initTimeout);\n        }\n\n        this.renderLegend();\n\n        this.setupNavigation(init);\n    }\n\n    calc() {} // builds state\n\n    updateWidth() {\n        this.baseWidth = getElementContentWidth(this.parent);\n        this.width = this.baseWidth - getExtraWidth(this.measures);\n    }\n\n    makeChartArea() {\n        if (this.svg) {\n            this.container.removeChild(this.svg);\n        }\n        let m = this.measures;\n\n        this.svg = makeSVGContainer(\n            this.container,\n            'frappe-chart chart',\n            this.baseWidth,\n            this.baseHeight\n        );\n        this.svgDefs = makeSVGDefs(this.svg);\n\n        if (this.title.length) {\n            this.titleEL = makeText('title', m.margins.left, m.margins.top, this.title, {\n                fontSize: m.titleFontSize,\n                fill: '#666666',\n                dy: m.titleFontSize\n            });\n        }\n\n        let top = getTopOffset(m);\n        this.drawArea = makeSVGGroup(\n            this.type + '-chart chart-draw-area',\n            `translate(${getLeftOffset(m)}, ${top})`\n        );\n\n        if (this.config.showLegend) {\n            top += this.height + m.paddings.bottom;\n            this.legendArea = makeSVGGroup(\n                'chart-legend',\n                `translate(${getLeftOffset(m)}, ${top})`\n            );\n        }\n\n        if (this.title.length) {\n            this.svg.appendChild(this.titleEL);\n        }\n        this.svg.appendChild(this.drawArea);\n        if (this.config.showLegend) {\n            this.svg.appendChild(this.legendArea);\n        }\n\n        this.updateTipOffset(getLeftOffset(m), getTopOffset(m));\n    }\n\n    updateTipOffset(x, y) {\n        this.tip.offset = {\n            x: x,\n            y: y\n        };\n    }\n\n    setupComponents() {\n        this.components = new Map();\n    }\n\n    update(data) {\n        if (!data) {\n            console.error('No data to update.');\n        }\n        this.data = this.prepareData(data);\n        this.calc(); // builds state\n        this.render(this.components, this.config.animate);\n        this.renderLegend();\n    }\n\n    render(components = this.components, animate = true) {\n        if (this.config.isNavigable) {\n            // Remove all existing overlays\n            this.overlays.map((o) => o.parentNode.removeChild(o));\n            // ref.parentNode.insertBefore(element, ref);\n        }\n        let elementsToAnimate = [];\n        // Can decouple to this.refreshComponents() first to save animation timeout\n        components.forEach((c) => {\n            elementsToAnimate = elementsToAnimate.concat(c.update(animate));\n        });\n        if (elementsToAnimate.length > 0) {\n            runSMILAnimation(this.container, this.svg, elementsToAnimate);\n            setTimeout(() => {\n                components.forEach((c) => c.make());\n                this.updateNav();\n            }, CHART_POST_ANIMATE_TIMEOUT);\n        } else {\n            components.forEach((c) => c.make());\n            this.updateNav();\n        }\n    }\n\n    updateNav() {\n        if (this.config.isNavigable) {\n            this.makeOverlay();\n            this.bindUnits();\n        }\n    }\n\n    renderLegend() {}\n\n    setupNavigation(init = false) {\n        if (!this.config.isNavigable) return;\n\n        if (init) {\n            this.bindOverlay();\n\n            this.keyActions = {\n                13: this.onEnterKey.bind(this),\n                37: this.onLeftArrow.bind(this),\n                38: this.onUpArrow.bind(this),\n                39: this.onRightArrow.bind(this),\n                40: this.onDownArrow.bind(this)\n            };\n\n            document.addEventListener('keydown', (e) => {\n                if (isElementInViewport(this.container)) {\n                    e = e || window.event;\n                    if (this.keyActions[e.keyCode]) {\n                        this.keyActions[e.keyCode]();\n                    }\n                }\n            });\n        }\n    }\n\n    makeOverlay() {}\n    updateOverlay() {}\n    bindOverlay() {}\n    bindUnits() {}\n\n    onLeftArrow() {}\n    onRightArrow() {}\n    onUpArrow() {}\n    onDownArrow() {}\n    onEnterKey() {}\n\n    addDataPoint() {}\n    removeDataPoint() {}\n\n    getDataPoint() {}\n    setCurrentDataPoint() {}\n\n    updateDataset() {}\n\n    export() {\n        let chartSvg = prepareForExport(this.svg);\n        downloadFile(this.title || 'Chart', [chartSvg]);\n    }\n}\n","import BaseChart from './BaseChart';\nimport { truncateString } from '../utils/draw-utils';\nimport { legendDot } from '../utils/draw';\nimport { round } from '../utils/helpers';\nimport { getExtraWidth } from '../utils/constants';\n\nexport default class AggregationChart extends BaseChart {\n\tconstructor(parent, args) {\n\t\tsuper(parent, args);\n\t}\n\n\tconfigure(args) {\n\t\tsuper.configure(args);\n\n\t\tthis.config.formatTooltipY = (args.tooltipOptions || {}).formatTooltipY;\n\t\tthis.config.maxSlices = args.maxSlices || 20;\n\t\tthis.config.maxLegendPoints = args.maxLegendPoints || 20;\n\t}\n\n\tcalc() {\n\t\tlet s = this.state;\n\t\tlet maxSlices = this.config.maxSlices;\n\t\ts.sliceTotals = [];\n\n\t\tlet allTotals = this.data.labels.map((label, i) => {\n\t\t\tlet total = 0;\n\t\t\tthis.data.datasets.map(e => {\n\t\t\t\ttotal += e.values[i];\n\t\t\t});\n\t\t\treturn [total, label];\n\t\t}).filter(d => { return d[0] >= 0; }); // keep only positive results\n\n\t\tlet totals = allTotals;\n\t\tif(allTotals.length > maxSlices) {\n\t\t\t// Prune and keep a grey area for rest as per maxSlices\n\t\t\tallTotals.sort((a, b) => { return b[0] - a[0]; });\n\n\t\t\ttotals = allTotals.slice(0, maxSlices-1);\n\t\t\tlet remaining = allTotals.slice(maxSlices-1);\n\n\t\t\tlet sumOfRemaining = 0;\n\t\t\tremaining.map(d => {sumOfRemaining += d[0];});\n\t\t\ttotals.push([sumOfRemaining, 'Rest']);\n\t\t\tthis.colors[maxSlices-1] = 'grey';\n\t\t}\n\n\t\ts.labels = [];\n\t\ttotals.map(d => {\n\t\t\ts.sliceTotals.push(round(d[0]));\n\t\t\ts.labels.push(d[1]);\n\t\t});\n\n\t\ts.grandTotal = s.sliceTotals.reduce((a, b) => a + b, 0);\n\n\t\tthis.center = {\n\t\t\tx: this.width / 2,\n\t\t\ty: this.height / 2\n\t\t};\n\t}\n\n\trenderLegend() {\n\t\tlet s = this.state;\n\t\tthis.legendArea.textContent = '';\n\t\tthis.legendTotals = s.sliceTotals.slice(0, this.config.maxLegendPoints);\n\n\t\tlet count = 0;\n\t\tlet y = 0;\n\t\tthis.legendTotals.map((d, i) => {\n\t\t\tlet barWidth = 150;\n\t\t\tlet divisor = Math.floor(\n\t\t\t\t(this.width - getExtraWidth(this.measures))/barWidth\n\t\t\t);\n\t\t\tif (this.legendTotals.length < divisor) {\n\t\t\t\tbarWidth = this.width/this.legendTotals.length;\n\t\t\t}\n\t\t\tif(count > divisor) {\n\t\t\t\tcount = 0;\n\t\t\t\ty += 20;\n\t\t\t}\n\t\t\tlet x = barWidth * count + 5;\n\t\t\tlet label = this.config.truncateLegends ? truncateString(s.labels[i], barWidth/10) : s.labels[i];\n\t\t\tlet formatted = this.config.formatTooltipY ? this.config.formatTooltipY(d) : d;\n\t\t\tlet dot = legendDot(\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t\t5,\n\t\t\t\tthis.colors[i],\n\t\t\t\t`${label}: ${formatted}`,\n\t\t\t\tfalse\n\t\t\t);\n\t\t\tthis.legendArea.appendChild(dot);\n\t\t\tcount++;\n\t\t});\n\t}\n}\n","// Playing around with dates\n\nexport const NO_OF_YEAR_MONTHS = 12;\nexport const NO_OF_DAYS_IN_WEEK = 7;\nexport const DAYS_IN_YEAR = 375;\nexport const NO_OF_MILLIS = 1000;\nexport const SEC_IN_DAY = 86400;\n\nexport const MONTH_NAMES = [\"January\", \"February\", \"March\", \"April\", \"May\",\n\t\"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\nexport const MONTH_NAMES_SHORT = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\n\t\"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\nexport const DAY_NAMES_SHORT = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\nexport const DAY_NAMES = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\",\n\t\"Thursday\", \"Friday\", \"Saturday\"];\n\n// https://stackoverflow.com/a/11252167/6495043\nfunction treatAsUtc(date) {\n\tlet result = new Date(date);\n\tresult.setMinutes(result.getMinutes() - result.getTimezoneOffset());\n\treturn result;\n}\n\nexport function getYyyyMmDd(date) {\n\tlet dd = date.getDate();\n\tlet mm = date.getMonth() + 1; // getMonth() is zero-based\n\treturn [\n\t\tdate.getFullYear(),\n\t\t(mm>9 ? '' : '0') + mm,\n\t\t(dd>9 ? '' : '0') + dd\n\t].join('-');\n}\n\nexport function clone(date) {\n\treturn new Date(date.getTime());\n}\n\nexport function timestampSec(date) {\n\treturn date.getTime()/NO_OF_MILLIS;\n}\n\nexport function timestampToMidnight(timestamp, roundAhead = false) {\n\tlet midnightTs = Math.floor(timestamp - (timestamp % SEC_IN_DAY));\n\tif(roundAhead) {\n\t\treturn midnightTs + SEC_IN_DAY;\n\t}\n\treturn midnightTs;\n}\n\n// export function getMonthsBetween(startDate, endDate) {}\n\nexport function getWeeksBetween(startDate, endDate) {\n\tlet weekStartDate = setDayToSunday(startDate);\n\treturn Math.ceil(getDaysBetween(weekStartDate, endDate) / NO_OF_DAYS_IN_WEEK);\n}\n\nexport function getDaysBetween(startDate, endDate) {\n\tlet millisecondsPerDay = SEC_IN_DAY * NO_OF_MILLIS;\n\treturn (treatAsUtc(endDate) - treatAsUtc(startDate)) / millisecondsPerDay;\n}\n\nexport function areInSameMonth(startDate, endDate) {\n\treturn startDate.getMonth() === endDate.getMonth()\n\t\t&& startDate.getFullYear() === endDate.getFullYear();\n}\n\nexport function getMonthName(i, short=false) {\n\tlet monthName = MONTH_NAMES[i];\n\treturn short ? monthName.slice(0, 3) : monthName;\n}\n\nexport function getLastDateInMonth (month, year) {\n\treturn new Date(year, month + 1, 0); // 0: last day in previous month\n}\n\n// mutates\nexport function setDayToSunday(date) {\n\tlet newDate = clone(date);\n\tconst day = newDate.getDay();\n\tif(day !== 0) {\n\t\taddDays(newDate, (-1) * day);\n\t}\n\treturn newDate;\n}\n\n// mutates\nexport function addDays(date, numberOfDays) {\n\tdate.setDate(date.getDate() + numberOfDays);\n}\n","import { makeSVGGroup } from '../utils/draw';\nimport {\n    makeText,\n    makePath,\n    xLine,\n    yLine,\n    generateAxisLabel,\n    yMarker,\n    yRegion,\n    datasetBar,\n    datasetDot,\n    percentageBar,\n    getPaths,\n    heatSquare\n} from '../utils/draw';\nimport { equilizeNoOfElements } from '../utils/draw-utils';\nimport {\n    translateHoriLine,\n    translateVertLine,\n    animateRegion,\n    animateBar,\n    animateDot,\n    animatePath,\n    animatePathStr\n} from '../utils/animate';\nimport { getMonthName } from '../utils/date-utils';\n\nclass ChartComponent {\n    constructor({\n        layerClass = '',\n        layerTransform = '',\n        constants,\n\n        getData,\n        makeElements,\n        animateElements\n    }) {\n        this.layerTransform = layerTransform;\n        this.constants = constants;\n\n        this.makeElements = makeElements;\n        this.getData = getData;\n\n        this.animateElements = animateElements;\n\n        this.store = [];\n        this.labels = [];\n\n        this.layerClass = layerClass;\n        this.layerClass =\n            typeof this.layerClass === 'function' ? this.layerClass() : this.layerClass;\n\n        this.refresh();\n    }\n\n    refresh(data) {\n        this.data = data || this.getData();\n    }\n\n    setup(parent) {\n        this.layer = makeSVGGroup(this.layerClass, this.layerTransform, parent);\n    }\n\n    make() {\n        this.render(this.data);\n        this.oldData = this.data;\n    }\n\n    render(data) {\n        this.store = this.makeElements(data);\n\n        this.layer.textContent = '';\n        this.store.forEach((element) => {\n            element.length\n                ? element.forEach((el) => {\n                      this.layer.appendChild(el);\n                  })\n                : this.layer.appendChild(element);\n        });\n        this.labels.forEach((element) => {\n            this.layer.appendChild(element);\n        });\n    }\n\n    update(animate = true) {\n        this.refresh();\n        let animateElements = [];\n        if (animate) {\n            animateElements = this.animateElements(this.data) || [];\n        }\n        return animateElements;\n    }\n}\n\nlet componentConfigs = {\n    donutSlices: {\n        layerClass: 'donut-slices',\n        makeElements(data) {\n            return data.sliceStrings.map((s, i) => {\n                let slice = makePath(\n                    s,\n                    'donut-path',\n                    data.colors[i],\n                    'none',\n                    data.strokeWidth\n                );\n                slice.style.transition = 'transform .3s;';\n                return slice;\n            });\n        },\n\n        animateElements(newData) {\n            return this.store.map((slice, i) =>\n                animatePathStr(slice, newData.sliceStrings[i])\n            );\n        }\n    },\n    pieSlices: {\n        layerClass: 'pie-slices',\n        makeElements(data) {\n            return data.sliceStrings.map((s, i) => {\n                let slice = makePath(s, 'pie-path', 'none', data.colors[i]);\n                slice.style.transition = 'transform .3s;';\n                return slice;\n            });\n        },\n\n        animateElements(newData) {\n            return this.store.map((slice, i) =>\n                animatePathStr(slice, newData.sliceStrings[i])\n            );\n        }\n    },\n    percentageBars: {\n        layerClass: 'percentage-bars',\n        makeElements(data) {\n            return data.xPositions.map((x, i) => {\n                let y = 0;\n                let bar = percentageBar(\n                    x,\n                    y,\n                    data.widths[i],\n                    this.constants.barHeight,\n                    this.constants.barDepth,\n                    data.colors[i]\n                );\n                return bar;\n            });\n        },\n\n        animateElements(newData) {\n            if (newData) return [];\n        }\n    },\n    yAxis: {\n        layerClass: 'y axis',\n        makeElements(data) {\n            let elements = [];\n\n            if (data.length) {\n                data.forEach((item, i) => {\n                    item.positions.map((position, i) => {\n                        elements.push(\n                            yLine(position, item.labels[i], this.constants.width, {\n                                mode: this.constants.mode,\n                                pos: item.pos || this.constants.pos,\n                                shortenNumbers: this.constants.shortenNumbers\n                            })\n                        );\n                    });\n                    // we need to make yAxis titles if they are defined\n                    if (item.title) {\n                        elements.push(\n                            generateAxisLabel({\n                                title: item.title,\n                                position: item.pos,\n                                height: item.zeroLine,\n                                width: this.constants.width\n                            })\n                        );\n                    }\n                });\n\n                return elements;\n            }\n\n            return data.positions.map((position, i) => {\n                return yLine(position, data.labels[i], this.constants.width, {\n                    mode: this.constants.mode,\n                    pos: this.constants.pos,\n                    shortenNumbers: this.constants.shortenNumbers\n                });\n            });\n        },\n\n        animateElements(newData) {\n            const animateMultipleElements = (oldData, newData) => {\n                let newPos = newData.positions;\n                let newLabels = newData.labels;\n                let oldPos = oldData.positions;\n                let oldLabels = oldData.labels;\n\n                [oldPos, newPos] = equilizeNoOfElements(oldPos, newPos);\n                [oldLabels, newLabels] = equilizeNoOfElements(oldLabels, newLabels);\n\n                this.render({\n                    positions: oldPos,\n                    labels: newLabels\n                });\n\n                return this.store.map((line, i) => {\n                    return translateHoriLine(line, newPos[i], oldPos[i]);\n                });\n            };\n\n            // we will need to animate both axis if we have more than one.\n            // so check if the oldData is an array of values.\n            if (this.oldData instanceof Array) {\n                return this.oldData.forEach((old, i) => {\n                    animateMultipleElements(old, newData[i]);\n                });\n            }\n\n            let newPos = newData.positions;\n            let newLabels = newData.labels;\n            let oldPos = this.oldData.positions;\n            let oldLabels = this.oldData.labels;\n\n            [oldPos, newPos] = equilizeNoOfElements(oldPos, newPos);\n            [oldLabels, newLabels] = equilizeNoOfElements(oldLabels, newLabels);\n\n            this.render({\n                positions: oldPos,\n                labels: newLabels\n            });\n\n            return this.store.map((line, i) => {\n                return translateHoriLine(line, newPos[i], oldPos[i]);\n            });\n        }\n    },\n\n    xAxis: {\n        layerClass: 'x axis',\n        makeElements(data) {\n            return data.positions.map((position, i) =>\n                xLine(position, data.calcLabels[i], this.constants.height, {\n                    mode: this.constants.mode,\n                    pos: this.constants.pos\n                })\n            );\n        },\n\n        animateElements(newData) {\n            let newPos = newData.positions;\n            let newLabels = newData.calcLabels;\n            let oldPos = this.oldData.positions;\n            let oldLabels = this.oldData.calcLabels;\n\n            [oldPos, newPos] = equilizeNoOfElements(oldPos, newPos);\n            [oldLabels, newLabels] = equilizeNoOfElements(oldLabels, newLabels);\n\n            this.render({\n                positions: oldPos,\n                calcLabels: newLabels\n            });\n\n            return this.store.map((line, i) => {\n                return translateVertLine(line, newPos[i], oldPos[i]);\n            });\n        }\n    },\n\n    yMarkers: {\n        layerClass: 'y-markers',\n        makeElements(data) {\n            return data.map((m) =>\n                yMarker(m.position, m.label, this.constants.width, {\n                    labelPos: m.options.labelPos,\n                    mode: 'span',\n                    lineType: 'dashed'\n                })\n            );\n        },\n        animateElements(newData) {\n            [this.oldData, newData] = equilizeNoOfElements(this.oldData, newData);\n\n            let newPos = newData.map((d) => d.position);\n            let newLabels = newData.map((d) => d.label);\n            let newOptions = newData.map((d) => d.options);\n\n            let oldPos = this.oldData.map((d) => d.position);\n\n            this.render(\n                oldPos.map((pos, i) => {\n                    return {\n                        position: oldPos[i],\n                        label: newLabels[i],\n                        options: newOptions[i]\n                    };\n                })\n            );\n\n            return this.store.map((line, i) => {\n                return translateHoriLine(line, newPos[i], oldPos[i]);\n            });\n        }\n    },\n\n    yRegions: {\n        layerClass: 'y-regions',\n        makeElements(data) {\n            return data.map((r) =>\n                yRegion(r.startPos, r.endPos, this.constants.width, r.label, {\n                    labelPos: r.options.labelPos\n                })\n            );\n        },\n        animateElements(newData) {\n            [this.oldData, newData] = equilizeNoOfElements(this.oldData, newData);\n\n            let newPos = newData.map((d) => d.endPos);\n            let newLabels = newData.map((d) => d.label);\n            let newStarts = newData.map((d) => d.startPos);\n            let newOptions = newData.map((d) => d.options);\n\n            let oldPos = this.oldData.map((d) => d.endPos);\n            let oldStarts = this.oldData.map((d) => d.startPos);\n\n            this.render(\n                oldPos.map((pos, i) => {\n                    return {\n                        startPos: oldStarts[i],\n                        endPos: oldPos[i],\n                        label: newLabels[i],\n                        options: newOptions[i]\n                    };\n                })\n            );\n\n            let animateElements = [];\n\n            this.store.map((rectGroup, i) => {\n                animateElements = animateElements.concat(\n                    animateRegion(rectGroup, newStarts[i], newPos[i], oldPos[i])\n                );\n            });\n\n            return animateElements;\n        }\n    },\n\n    heatDomain: {\n        layerClass: function () {\n            return 'heat-domain domain-' + this.constants.index;\n        },\n        makeElements(data) {\n            let { index, colWidth, rowHeight, squareSize, radius, xTranslate } =\n                this.constants;\n            let monthNameHeight = -12;\n            let x = xTranslate,\n                y = 0;\n\n            this.serializedSubDomains = [];\n\n            data.cols.map((week, weekNo) => {\n                if (weekNo === 1) {\n                    this.labels.push(\n                        makeText(\n                            'domain-name',\n                            x,\n                            monthNameHeight,\n                            getMonthName(index, true).toUpperCase(),\n                            {\n                                fontSize: 9\n                            }\n                        )\n                    );\n                }\n                week.map((day, i) => {\n                    if (day.fill) {\n                        let data = {\n                            'data-date': day.yyyyMmDd,\n                            'data-value': day.dataValue,\n                            'data-day': i\n                        };\n                        let square = heatSquare(\n                            'day',\n                            x,\n                            y,\n                            squareSize,\n                            radius,\n                            day.fill,\n                            data\n                        );\n                        this.serializedSubDomains.push(square);\n                    }\n                    y += rowHeight;\n                });\n                y = 0;\n                x += colWidth;\n            });\n\n            return this.serializedSubDomains;\n        },\n\n        animateElements(newData) {\n            if (newData) return [];\n        }\n    },\n\n    barGraph: {\n        layerClass: function () {\n            return 'dataset-units dataset-bars dataset-' + this.constants.index;\n        },\n        makeElements(data) {\n            let c = this.constants;\n            this.unitType = 'bar';\n            this.units = data.yPositions.map((y, j) => {\n                return datasetBar(\n                    data.xPositions[j],\n                    y,\n                    data.barWidth,\n                    c.color,\n                    data.labels[j],\n                    j,\n                    data.offsets[j],\n                    {\n                        zeroLine: data.zeroLine,\n                        barsWidth: data.barsWidth,\n                        minHeight: c.minHeight\n                    }\n                );\n            });\n            return this.units;\n        },\n        animateElements(newData) {\n            let newXPos = newData.xPositions;\n            let newYPos = newData.yPositions;\n            let newOffsets = newData.offsets;\n            let newLabels = newData.labels;\n\n            let oldXPos = this.oldData.xPositions;\n            let oldYPos = this.oldData.yPositions;\n            let oldOffsets = this.oldData.offsets;\n            let oldLabels = this.oldData.labels;\n\n            [oldXPos, newXPos] = equilizeNoOfElements(oldXPos, newXPos);\n            [oldYPos, newYPos] = equilizeNoOfElements(oldYPos, newYPos);\n            [oldOffsets, newOffsets] = equilizeNoOfElements(oldOffsets, newOffsets);\n            [oldLabels, newLabels] = equilizeNoOfElements(oldLabels, newLabels);\n\n            this.render({\n                xPositions: oldXPos,\n                yPositions: oldYPos,\n                offsets: oldOffsets,\n                labels: newLabels,\n\n                zeroLine: this.oldData.zeroLine,\n                barsWidth: this.oldData.barsWidth,\n                barWidth: this.oldData.barWidth\n            });\n\n            let animateElements = [];\n\n            this.store.map((bar, i) => {\n                animateElements = animateElements.concat(\n                    animateBar(bar, newXPos[i], newYPos[i], newData.barWidth, newOffsets[i], {\n                        zeroLine: newData.zeroLine\n                    })\n                );\n            });\n\n            return animateElements;\n        }\n    },\n\n    lineGraph: {\n        layerClass: function () {\n            return 'dataset-units dataset-line dataset-' + this.constants.index;\n        },\n        makeElements(data) {\n            let c = this.constants;\n            this.unitType = 'dot';\n            this.paths = {};\n            if (!c.hideLine) {\n                this.paths = getPaths(\n                    data.xPositions,\n                    data.yPositions,\n                    c.color,\n                    {\n                        heatline: c.heatline,\n                        regionFill: c.regionFill,\n                        spline: c.spline\n                    },\n                    {\n                        svgDefs: c.svgDefs,\n                        zeroLine: data.zeroLine\n                    }\n                );\n            }\n\n            this.units = [];\n\n            if (!c.hideDots) {\n                this.units = data.yPositions.map((y, j) => {\n                    return datasetDot(\n                        data.xPositions[j],\n                        y,\n                        data.radius,\n                        c.color,\n                        c.valuesOverPoints ? data.values[j] : '',\n                        j\n                    );\n                });\n            }\n\n            return Object.values(this.paths).concat(this.units);\n        },\n        animateElements(newData) {\n            let newXPos = newData.xPositions;\n            let newYPos = newData.yPositions;\n            let newValues = newData.values;\n\n            let oldXPos = this.oldData.xPositions;\n            let oldYPos = this.oldData.yPositions;\n            let oldValues = this.oldData.values;\n\n            [oldXPos, newXPos] = equilizeNoOfElements(oldXPos, newXPos);\n            [oldYPos, newYPos] = equilizeNoOfElements(oldYPos, newYPos);\n            [oldValues, newValues] = equilizeNoOfElements(oldValues, newValues);\n\n            this.render({\n                xPositions: oldXPos,\n                yPositions: oldYPos,\n                values: newValues,\n\n                zeroLine: this.oldData.zeroLine,\n                radius: this.oldData.radius\n            });\n\n            let animateElements = [];\n\n            if (Object.keys(this.paths).length) {\n                animateElements = animateElements.concat(\n                    animatePath(\n                        this.paths,\n                        newXPos,\n                        newYPos,\n                        newData.zeroLine,\n                        this.constants.spline\n                    )\n                );\n            }\n\n            if (this.units.length) {\n                this.units.map((dot, i) => {\n                    animateElements = animateElements.concat(\n                        animateDot(dot, newXPos[i], newYPos[i])\n                    );\n                });\n            }\n\n            return animateElements;\n        }\n    }\n};\n\nexport function getComponent(name, constants, getData) {\n    let keys = Object.keys(componentConfigs).filter((k) => name.includes(k));\n    let config = componentConfigs[keys[0]];\n    Object.assign(config, {\n        constants: constants,\n        getData: getData\n    });\n    return new ChartComponent(config);\n}\n","import AggregationChart from './AggregationChart';\nimport { getOffset } from '../utils/dom';\nimport { getComponent } from '../objects/ChartComponents';\nimport { PERCENTAGE_BAR_DEFAULT_HEIGHT, PERCENTAGE_BAR_DEFAULT_DEPTH } from '../utils/constants';\n\nexport default class PercentageChart extends AggregationChart {\n\tconstructor(parent, args) {\n\t\tsuper(parent, args);\n\t\tthis.type = 'percentage';\n\t\tthis.setup();\n\t}\n\n\tsetMeasures(options) {\n\t\tlet m = this.measures;\n\t\tthis.barOptions = options.barOptions || {};\n\n\t\tlet b = this.barOptions;\n\t\tb.height = b.height || PERCENTAGE_BAR_DEFAULT_HEIGHT;\n\t\tb.depth = b.depth || PERCENTAGE_BAR_DEFAULT_DEPTH;\n\n\t\tm.paddings.right = 30;\n\t\tm.legendHeight = 60;\n\t\tm.baseHeight = (b.height + b.depth * 0.5) * 8;\n\t}\n\n\tsetupComponents() {\n\t\tlet s = this.state;\n\n\t\tlet componentConfigs = [\n\t\t\t[\n\t\t\t\t'percentageBars',\n\t\t\t\t{\n\t\t\t\t\tbarHeight: this.barOptions.height,\n\t\t\t\t\tbarDepth: this.barOptions.depth,\n\t\t\t\t},\n\t\t\t\tfunction() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\txPositions: s.xPositions,\n\t\t\t\t\t\twidths: s.widths,\n\t\t\t\t\t\tcolors: this.colors\n\t\t\t\t\t};\n\t\t\t\t}.bind(this)\n\t\t\t]\n\t\t];\n\n\t\tthis.components = new Map(componentConfigs\n\t\t\t.map(args => {\n\t\t\t\tlet component = getComponent(...args);\n\t\t\t\treturn [args[0], component];\n\t\t\t}));\n\t}\n\n\tcalc() {\n\t\tsuper.calc();\n\t\tlet s = this.state;\n\n\t\ts.xPositions = [];\n\t\ts.widths = [];\n\n\t\tlet xPos = 0;\n\t\ts.sliceTotals.map((value) => {\n\t\t\tlet width = this.width * value / s.grandTotal;\n\t\t\ts.widths.push(width);\n\t\t\ts.xPositions.push(xPos);\n\t\t\txPos += width;\n\t\t});\n\t}\n\n\tmakeDataByIndex() { }\n\n\tbindTooltip() {\n\t\tlet s = this.state;\n\t\tthis.container.addEventListener('mousemove', (e) => {\n\t\t\tlet bars = this.components.get('percentageBars').store;\n\t\t\tlet bar = e.target;\n\t\t\tif(bars.includes(bar)) {\n\n\t\t\t\tlet i = bars.indexOf(bar);\n\t\t\t\tlet gOff = getOffset(this.container), pOff = getOffset(bar);\n\n\t\t\t\tlet x = pOff.left - gOff.left + parseInt(bar.getAttribute('width'))/2;\n\t\t\t\tlet y = pOff.top - gOff.top;\n\t\t\t\tlet title = (this.formattedLabels && this.formattedLabels.length>0\n\t\t\t\t\t? this.formattedLabels[i] : this.state.labels[i]) + ': ';\n\t\t\t\tlet fraction = s.sliceTotals[i]/s.grandTotal;\n\n\t\t\t\tthis.tip.setValues(x, y, {name: title, value: (fraction*100).toFixed(1) + \"%\"});\n\t\t\t\tthis.tip.showTip();\n\t\t\t}\n\t\t});\n\t}\n}\n","import AggregationChart from './AggregationChart';\nimport { getComponent } from '../objects/ChartComponents';\nimport { getOffset } from '../utils/dom';\nimport { getPositionByAngle } from '../utils/helpers';\nimport { makeArcPathStr, makeCircleStr } from '../utils/draw';\nimport { lightenDarkenColor } from '../utils/colors';\nimport { transform } from '../utils/animation';\nimport { FULL_ANGLE } from '../utils/constants';\n\nexport default class PieChart extends AggregationChart {\n\tconstructor(parent, args) {\n\t\tsuper(parent, args);\n\t\tthis.type = 'pie';\n\t\tthis.initTimeout = 0;\n\t\tthis.init = 1;\n\n\t\tthis.setup();\n\t}\n\n\tconfigure(args) {\n\t\tsuper.configure(args);\n\t\tthis.mouseMove = this.mouseMove.bind(this);\n\t\tthis.mouseLeave = this.mouseLeave.bind(this);\n\n\t\tthis.hoverRadio = args.hoverRadio || 0.1;\n\t\tthis.config.startAngle = args.startAngle || 0;\n\n\t\tthis.clockWise = args.clockWise || false;\n\t}\n\n\tcalc() {\n\t\tsuper.calc();\n\t\tlet s = this.state;\n\t\tthis.radius = (this.height > this.width ? this.center.x : this.center.y);\n\n\t\tconst { radius, clockWise } = this;\n\n\t\tconst prevSlicesProperties = s.slicesProperties || [];\n\t\ts.sliceStrings = [];\n\t\ts.slicesProperties = [];\n\t\tlet curAngle = 180 - this.config.startAngle;\n\t\ts.sliceTotals.map((total, i) => {\n\t\t\tconst startAngle = curAngle;\n\t\t\tconst originDiffAngle = (total / s.grandTotal) * FULL_ANGLE;\n\t\t\tconst largeArc = originDiffAngle > 180 ? 1: 0;\n\t\t\tconst diffAngle = clockWise ? -originDiffAngle : originDiffAngle;\n\t\t\tconst endAngle = curAngle = curAngle + diffAngle;\n\t\t\tconst startPosition = getPositionByAngle(startAngle, radius);\n\t\t\tconst endPosition = getPositionByAngle(endAngle, radius);\n\n\t\t\tconst prevProperty = this.init && prevSlicesProperties[i];\n\n\t\t\tlet curStart,curEnd;\n\t\t\tif(this.init) {\n\t\t\t\tcurStart = prevProperty ? prevProperty.startPosition : startPosition;\n\t\t\t\tcurEnd = prevProperty ? prevProperty.endPosition : startPosition;\n\t\t\t} else {\n\t\t\t\tcurStart = startPosition;\n\t\t\t\tcurEnd = endPosition;\n\t\t\t}\n\t\t\tconst curPath =\n\t\t\t\toriginDiffAngle === 360\n\t\t\t\t\t? makeCircleStr(curStart, curEnd, this.center, this.radius, clockWise, largeArc)\n\t\t\t\t\t: makeArcPathStr(curStart, curEnd, this.center, this.radius, clockWise, largeArc);\n\n\t\t\ts.sliceStrings.push(curPath);\n\t\t\ts.slicesProperties.push({\n\t\t\t\tstartPosition,\n\t\t\t\tendPosition,\n\t\t\t\tvalue: total,\n\t\t\t\ttotal: s.grandTotal,\n\t\t\t\tstartAngle,\n\t\t\t\tendAngle,\n\t\t\t\tangle: diffAngle\n\t\t\t});\n\n\t\t});\n\t\tthis.init = 0;\n\t}\n\n\tsetupComponents() {\n\t\tlet s = this.state;\n\n\t\tlet componentConfigs = [\n\t\t\t[\n\t\t\t\t'pieSlices',\n\t\t\t\t{ },\n\t\t\t\tfunction() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsliceStrings: s.sliceStrings,\n\t\t\t\t\t\tcolors: this.colors\n\t\t\t\t\t};\n\t\t\t\t}.bind(this)\n\t\t\t]\n\t\t];\n\n\t\tthis.components = new Map(componentConfigs\n\t\t\t.map(args => {\n\t\t\t\tlet component = getComponent(...args);\n\t\t\t\treturn [args[0], component];\n\t\t\t}));\n\t}\n\n\tcalTranslateByAngle(property){\n\t\tconst{radius,hoverRadio} = this;\n\t\tconst position = getPositionByAngle(property.startAngle+(property.angle / 2),radius);\n\t\treturn `translate3d(${(position.x) * hoverRadio}px,${(position.y) * hoverRadio}px,0)`;\n\t}\n\n\thoverSlice(path,i,flag,e){\n\t\tif(!path) return;\n\t\tconst color = this.colors[i];\n\t\tif(flag) {\n\t\t\ttransform(path, this.calTranslateByAngle(this.state.slicesProperties[i]));\n\t\t\tpath.style.fill = lightenDarkenColor(color, 50);\n\t\t\tlet g_off = getOffset(this.svg);\n\t\t\tlet x = e.pageX - g_off.left + 10;\n\t\t\tlet y = e.pageY - g_off.top - 10;\n\t\t\tlet title = (this.formatted_labels && this.formatted_labels.length > 0\n\t\t\t\t? this.formatted_labels[i] : this.state.labels[i]) + ': ';\n\t\t\tlet percent = (this.state.sliceTotals[i] * 100 / this.state.grandTotal).toFixed(1);\n\t\t\tthis.tip.setValues(x, y, {name: title, value: percent + \"%\"});\n\t\t\tthis.tip.showTip();\n\t\t} else {\n\t\t\ttransform(path,'translate3d(0,0,0)');\n\t\t\tthis.tip.hideTip();\n\t\t\tpath.style.fill = color;\n\t\t}\n\t}\n\n\tbindTooltip() {\n\t\tthis.container.addEventListener('mousemove', this.mouseMove);\n\t\tthis.container.addEventListener('mouseleave', this.mouseLeave);\n\t}\n\n\tmouseMove(e){\n\t\tconst target = e.target;\n\t\tlet slices = this.components.get('pieSlices').store;\n\t\tlet prevIndex = this.curActiveSliceIndex;\n\t\tlet prevAcitve = this.curActiveSlice;\n\t\tif(slices.includes(target)) {\n\t\t\tlet i = slices.indexOf(target);\n\t\t\tthis.hoverSlice(prevAcitve, prevIndex,false);\n\t\t\tthis.curActiveSlice = target;\n\t\t\tthis.curActiveSliceIndex = i;\n\t\t\tthis.hoverSlice(target, i, true, e);\n\t\t} else {\n\t\t\tthis.mouseLeave();\n\t\t}\n\t}\n\n\tmouseLeave(){\n\t\tthis.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,false);\n\t}\n}\n","import { floatTwo } from './helpers';\n\nfunction normalize(x) {\n\t// Calculates mantissa and exponent of a number\n\t// Returns normalized number and exponent\n\t// https://stackoverflow.com/q/9383593/6495043\n\n\tif(x===0) {\n\t\treturn [0, 0];\n\t}\n\tif(isNaN(x)) {\n\t\treturn {mantissa: -6755399441055744, exponent: 972};\n\t}\n\tvar sig = x > 0 ? 1 : -1;\n\tif(!isFinite(x)) {\n\t\treturn {mantissa: sig * 4503599627370496, exponent: 972};\n\t}\n\n\tx = Math.abs(x);\n\tvar exp = Math.floor(Math.log10(x));\n\tvar man = x/Math.pow(10, exp);\n\n\treturn [sig * man, exp];\n}\n\nfunction getChartRangeIntervals(max, min=0) {\n\tlet upperBound = Math.ceil(max);\n\tlet lowerBound = Math.floor(min);\n\tlet range = upperBound - lowerBound;\n\n\tlet noOfParts = range;\n\tlet partSize = 1;\n\n\t// To avoid too many partitions\n\tif(range > 5) {\n\t\tif(range % 2 !== 0) {\n\t\t\tupperBound++;\n\t\t\t// Recalc range\n\t\t\trange = upperBound - lowerBound;\n\t\t}\n\t\tnoOfParts = range/2;\n\t\tpartSize = 2;\n\t}\n\n\t// Special case: 1 and 2\n\tif(range <= 2) {\n\t\tnoOfParts = 4;\n\t\tpartSize = range/noOfParts;\n\t}\n\n\t// Special case: 0\n\tif(range === 0) {\n\t\tnoOfParts = 5;\n\t\tpartSize = 1;\n\t}\n\n\tlet intervals = [];\n\tfor(var i = 0; i <= noOfParts; i++){\n\t\tintervals.push(lowerBound + partSize * i);\n\t}\n\treturn intervals;\n}\n\nfunction getChartIntervals(maxValue, minValue=0) {\n\tlet [normalMaxValue, exponent] = normalize(maxValue);\n\tlet normalMinValue = minValue ? minValue/Math.pow(10, exponent): 0;\n\n\t// Allow only 7 significant digits\n\tnormalMaxValue = normalMaxValue.toFixed(6);\n\n\tlet intervals = getChartRangeIntervals(normalMaxValue, normalMinValue);\n\tintervals = intervals.map(value => {\n\t\t// For negative exponents we want to divide by 10^-exponent to avoid\n\t\t// floating point arithmetic bugs. For instance, in javascript\n\t\t// 6 * 10^-1 == 0.6000000000000001, we instead want 6 / 10^1 == 0.6\n\t\tif (exponent < 0) {\n\t\t\treturn value / Math.pow(10, -exponent);\n\t\t}\n\t\treturn value * Math.pow(10, exponent);\n\t});\n\treturn intervals;\n}\n\nexport function calcChartIntervals(values, withMinimum=false) {\n\t//*** Where the magic happens ***\n\n\t// Calculates best-fit y intervals from given values\n\t// and returns the interval array\n\n\tlet maxValue = Math.max(...values);\n\tlet minValue = Math.min(...values);\n\n\t// Exponent to be used for pretty print\n\tlet exponent = 0, intervals = []; // eslint-disable-line no-unused-vars\n\n\tfunction getPositiveFirstIntervals(maxValue, absMinValue) {\n\t\tlet intervals = getChartIntervals(maxValue);\n\n\t\tlet intervalSize = intervals[1] - intervals[0];\n\n\t\t// Then unshift the negative values\n\t\tlet value = 0;\n\t\tfor(var i = 1; value < absMinValue; i++) {\n\t\t\tvalue += intervalSize;\n\t\t\tintervals.unshift((-1) * value);\n\t\t}\n\t\treturn intervals;\n\t}\n\n\t// CASE I: Both non-negative\n\n\tif(maxValue >= 0 && minValue >= 0) {\n\t\texponent = normalize(maxValue)[1];\n\t\tif(!withMinimum) {\n\t\t\tintervals = getChartIntervals(maxValue);\n\t\t} else {\n\t\t\tintervals = getChartIntervals(maxValue, minValue);\n\t\t}\n\t}\n\n\t// CASE II: Only minValue negative\n\n\telse if(maxValue > 0 && minValue < 0) {\n\t\t// `withMinimum` irrelevant in this case,\n\t\t// We'll be handling both sides of zero separately\n\t\t// (both starting from zero)\n\t\t// Because ceil() and floor() behave differently\n\t\t// in those two regions\n\n\t\tlet absMinValue = Math.abs(minValue);\n\n\t\tif(maxValue >= absMinValue) {\n\t\t\texponent = normalize(maxValue)[1];\n\t\t\tintervals = getPositiveFirstIntervals(maxValue, absMinValue);\n\t\t} else {\n\t\t\t// Mirror: maxValue => absMinValue, then change sign\n\t\t\texponent = normalize(absMinValue)[1];\n\t\t\tlet posIntervals = getPositiveFirstIntervals(absMinValue, maxValue);\n\t\t\tintervals = posIntervals.reverse().map(d => d * (-1));\n\t\t}\n\n\t}\n\n\t// CASE III: Both non-positive\n\n\telse if(maxValue <= 0 && minValue <= 0) {\n\t\t// Mirrored Case I:\n\t\t// Work with positives, then reverse the sign and array\n\n\t\tlet pseudoMaxValue = Math.abs(minValue);\n\t\tlet pseudoMinValue = Math.abs(maxValue);\n\n\t\texponent = normalize(pseudoMaxValue)[1];\n\t\tif(!withMinimum) {\n\t\t\tintervals = getChartIntervals(pseudoMaxValue);\n\t\t} else {\n\t\t\tintervals = getChartIntervals(pseudoMaxValue, pseudoMinValue);\n\t\t}\n\n\t\tintervals = intervals.reverse().map(d => d * (-1));\n\t}\n\n\treturn intervals;\n}\n\nexport function getZeroIndex(yPts) {\n\tlet zeroIndex;\n\tlet interval = getIntervalSize(yPts);\n\tif(yPts.indexOf(0) >= 0) {\n\t\t// the range has a given zero\n\t\t// zero-line on the chart\n\t\tzeroIndex = yPts.indexOf(0);\n\t} else if(yPts[0] > 0) {\n\t\t// Minimum value is positive\n\t\t// zero-line is off the chart: below\n\t\tlet min = yPts[0];\n\t\tzeroIndex = (-1) * min / interval;\n\t} else {\n\t\t// Maximum value is negative\n\t\t// zero-line is off the chart: above\n\t\tlet max = yPts[yPts.length - 1];\n\t\tzeroIndex = (-1) * max / interval + (yPts.length - 1);\n\t}\n\treturn zeroIndex;\n}\n\nexport function getRealIntervals(max, noOfIntervals, min = 0, asc = 1) {\n\tlet range = max - min;\n\tlet part = range * 1.0 / noOfIntervals;\n\tlet intervals = [];\n\n\tfor(var i = 0; i <= noOfIntervals; i++) {\n\t\tintervals.push(min + part * i);\n\t}\n\n\treturn asc ? intervals : intervals.reverse();\n}\n\nexport function getIntervalSize(orderedArray) {\n\treturn orderedArray[1] - orderedArray[0];\n}\n\nexport function getValueRange(orderedArray) {\n\treturn orderedArray[orderedArray.length-1] - orderedArray[0];\n}\n\nexport function scale(val, yAxis) {\n\treturn floatTwo(yAxis.zeroLine - val * yAxis.scaleMultiplier);\n}\n\nexport function isInRange(val, min, max) {\n\treturn val > min && val < max;\n}\n\nexport function isInRange2D(coord, minCoord, maxCoord) {\n\treturn isInRange(coord[0], minCoord[0], maxCoord[0])\n\t\t&& isInRange(coord[1], minCoord[1], maxCoord[1]);\n}\n\nexport function getClosestInArray(goal, arr, index = false) {\n\tlet closest = arr.reduce(function(prev, curr) {\n\t\treturn (Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev);\n\t}, []);\n\n\treturn index ? arr.indexOf(closest) : closest;\n}\n\nexport function calcDistribution(values, distributionSize) {\n\t// Assume non-negative values,\n\t// implying distribution minimum at zero\n\n\tlet dataMaxValue = Math.max(...values);\n\n\tlet distributionStep = 1 / (distributionSize - 1);\n\tlet distribution = [];\n\n\tfor(var i = 0; i < distributionSize; i++) {\n\t\tlet checkpoint = dataMaxValue * (distributionStep * i);\n\t\tdistribution.push(checkpoint);\n\t}\n\n\treturn distribution;\n}\n\nexport function getMaxCheckpoint(value, distribution) {\n\treturn distribution.filter(d => d < value).length;\n}\n","import BaseChart from './BaseChart';\nimport { getComponent } from '../objects/ChartComponents';\nimport { makeText, heatSquare } from '../utils/draw';\nimport { DAY_NAMES_SHORT, addDays, areInSameMonth, getLastDateInMonth, setDayToSunday, getYyyyMmDd, getWeeksBetween, getMonthName, clone,\n\tNO_OF_MILLIS, NO_OF_YEAR_MONTHS, NO_OF_DAYS_IN_WEEK } from '../utils/date-utils';\nimport { calcDistribution, getMaxCheckpoint } from '../utils/intervals';\nimport { getExtraHeight, getExtraWidth, HEATMAP_DISTRIBUTION_SIZE, HEATMAP_SQUARE_SIZE,\n\tHEATMAP_GUTTER_SIZE } from '../utils/constants';\n\nconst COL_WIDTH = HEATMAP_SQUARE_SIZE + HEATMAP_GUTTER_SIZE;\nconst ROW_HEIGHT = COL_WIDTH;\n// const DAY_INCR = 1;\n\nexport default class Heatmap extends BaseChart {\n\tconstructor(parent, options) {\n\t\tsuper(parent, options);\n\t\tthis.type = 'heatmap';\n\n\t\tthis.countLabel = options.countLabel || '';\n\n\t\tlet validStarts = ['Sunday', 'Monday'];\n\t\tlet startSubDomain = validStarts.includes(options.startSubDomain)\n\t\t\t? options.startSubDomain : 'Sunday';\n\t\tthis.startSubDomainIndex = validStarts.indexOf(startSubDomain);\n\n\t\tthis.setup();\n\t}\n\n\tsetMeasures(options) {\n\t\tlet m = this.measures;\n\t\tthis.discreteDomains = options.discreteDomains === 0 ? 0 : 1;\n\n\t\tm.paddings.top = ROW_HEIGHT * 3;\n\t\tm.paddings.bottom = 0;\n\t\tm.legendHeight = ROW_HEIGHT * 2;\n\t\tm.baseHeight = ROW_HEIGHT * NO_OF_DAYS_IN_WEEK\n\t\t\t+ getExtraHeight(m);\n\n\t\tlet d = this.data;\n\t\tlet spacing = this.discreteDomains ? NO_OF_YEAR_MONTHS : 0;\n\t\tthis.independentWidth = (getWeeksBetween(d.start, d.end)\n\t\t\t+ spacing) * COL_WIDTH + getExtraWidth(m);\n\t}\n\n\tupdateWidth() {\n\t\tlet spacing = this.discreteDomains ? NO_OF_YEAR_MONTHS : 0;\n\t\tlet noOfWeeks = this.state.noOfWeeks ? this.state.noOfWeeks : 52;\n\t\tthis.baseWidth = (noOfWeeks + spacing) * COL_WIDTH\n\t\t\t+ getExtraWidth(this.measures);\n\t}\n\n\tprepareData(data=this.data) {\n\t\tif(data.start && data.end && data.start > data.end) {\n\t\t\tthrow new Error('Start date cannot be greater than end date.');\n\t\t}\n\n\t\tif(!data.start) {\n\t\t\tdata.start = new Date();\n\t\t\tdata.start.setFullYear( data.start.getFullYear() - 1 );\n\t\t}\n\t\tif(!data.end) { data.end = new Date(); }\n\t\tdata.dataPoints = data.dataPoints || {};\n\n\t\tif(parseInt(Object.keys(data.dataPoints)[0]) > 100000) {\n\t\t\tlet points = {};\n\t\t\tObject.keys(data.dataPoints).forEach(timestampSec => {\n\t\t\t\tlet date = new Date(timestampSec * NO_OF_MILLIS);\n\t\t\t\tpoints[getYyyyMmDd(date)] = data.dataPoints[timestampSec];\n\t\t\t});\n\t\t\tdata.dataPoints = points;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tcalc() {\n\t\tlet s = this.state;\n\n\t\ts.start = clone(this.data.start);\n\t\ts.end = clone(this.data.end);\n\n\t\ts.firstWeekStart = clone(s.start);\n\t\ts.noOfWeeks = getWeeksBetween(s.start, s.end);\n\t\ts.distribution = calcDistribution(\n\t\t\tObject.values(this.data.dataPoints), HEATMAP_DISTRIBUTION_SIZE);\n\n\t\ts.domainConfigs = this.getDomains();\n\t}\n\n\tsetupComponents() {\n\t\tlet s = this.state;\n\t\tlet lessCol = this.discreteDomains ? 0 : 1;\n\n\t\tlet componentConfigs = s.domainConfigs.map((config, i) => [\n\t\t\t'heatDomain',\n\t\t\t{\n\t\t\t\tindex: config.index,\n\t\t\t\tcolWidth: COL_WIDTH,\n\t\t\t\trowHeight: ROW_HEIGHT,\n\t\t\t\tsquareSize: HEATMAP_SQUARE_SIZE,\n\t\t\t\tradius: this.rawChartArgs.radius || 0,\n\t\t\t\txTranslate: s.domainConfigs\n\t\t\t\t\t.filter((config, j) => j < i)\n\t\t\t\t\t.map(config => config.cols.length - lessCol)\n\t\t\t\t\t.reduce((a, b) => a + b, 0)\n\t\t\t\t\t* COL_WIDTH\n\t\t\t},\n\t\t\tfunction() {\n\t\t\t\treturn s.domainConfigs[i];\n\t\t\t}.bind(this)\n\n\t\t]);\n\n\t\tthis.components = new Map(componentConfigs\n\t\t\t.map((args, i) => {\n\t\t\t\tlet component = getComponent(...args);\n\t\t\t\treturn [args[0] + '-' + i, component];\n\t\t\t})\n\t\t);\n\n\t\tlet y = 0;\n\t\tDAY_NAMES_SHORT.forEach((dayName, i) => {\n\t\t\tif([1, 3, 5].includes(i)) {\n\t\t\t\tlet dayText = makeText('subdomain-name', -COL_WIDTH/2, y, dayName,\n\t\t\t\t\t{\n\t\t\t\t\t\tfontSize: HEATMAP_SQUARE_SIZE,\n\t\t\t\t\t\tdy: 8,\n\t\t\t\t\t\ttextAnchor: 'end'\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tthis.drawArea.appendChild(dayText);\n\t\t\t}\n\t\t\ty += ROW_HEIGHT;\n\t\t});\n\t}\n\n\tupdate(data) {\n\t\tif(!data) {\n\t\t\tconsole.error('No data to update.');\n\t\t}\n\n\t\tthis.data = this.prepareData(data);\n\t\tthis.draw();\n\t\tthis.bindTooltip();\n\t}\n\n\tbindTooltip() {\n\t\tthis.container.addEventListener('mousemove', (e) => {\n\t\t\tthis.components.forEach(comp => {\n\t\t\t\tlet daySquares = comp.store;\n\t\t\t\tlet daySquare = e.target;\n\t\t\t\tif(daySquares.includes(daySquare)) {\n\n\t\t\t\t\tlet count = daySquare.getAttribute('data-value');\n\t\t\t\t\tlet dateParts = daySquare.getAttribute('data-date').split('-');\n\n\t\t\t\t\tlet month = getMonthName(parseInt(dateParts[1])-1, true);\n\n\t\t\t\t\tlet gOff = this.container.getBoundingClientRect(), pOff = daySquare.getBoundingClientRect();\n\n\t\t\t\t\tlet width = parseInt(e.target.getAttribute('width'));\n\t\t\t\t\tlet x = pOff.left - gOff.left + width/2;\n\t\t\t\t\tlet y = pOff.top - gOff.top;\n\t\t\t\t\tlet value = count + ' ' + this.countLabel;\n\t\t\t\t\tlet name = ' on ' + month + ' ' + dateParts[0] + ', ' + dateParts[2];\n\n\t\t\t\t\tthis.tip.setValues(x, y, {name: name, value: value, valueFirst: 1}, []);\n\t\t\t\t\tthis.tip.showTip();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\trenderLegend() {\n\t\tthis.legendArea.textContent = '';\n\t\tlet x = 0;\n\t\tlet y = ROW_HEIGHT;\n\t\tlet radius = this.rawChartArgs.radius || 0;\n\n\t\tlet lessText = makeText('subdomain-name', x, y, 'Less',\n\t\t\t{\n\t\t\t\tfontSize: HEATMAP_SQUARE_SIZE + 1,\n\t\t\t\tdy: 9\n\t\t\t}\n\t\t);\n\t\tx = (COL_WIDTH * 2) + COL_WIDTH/2;\n\t\tthis.legendArea.appendChild(lessText);\n\n\t\tthis.colors.slice(0, HEATMAP_DISTRIBUTION_SIZE).map((color, i) => {\n\t\t\tconst square = heatSquare('heatmap-legend-unit', x + (COL_WIDTH + 3) * i,\n\t\t\t\ty, HEATMAP_SQUARE_SIZE, radius, color);\n\t\t\tthis.legendArea.appendChild(square);\n\t\t});\n\n\t\tlet moreTextX = x + HEATMAP_DISTRIBUTION_SIZE * (COL_WIDTH + 3) + COL_WIDTH/4;\n\t\tlet moreText = makeText('subdomain-name', moreTextX, y, 'More',\n\t\t\t{\n\t\t\t\tfontSize: HEATMAP_SQUARE_SIZE + 1,\n\t\t\t\tdy: 9\n\t\t\t}\n\t\t);\n\t\tthis.legendArea.appendChild(moreText);\n\t}\n\n\tgetDomains() {\n\t\tlet s = this.state;\n\t\tconst [startMonth, startYear] = [s.start.getMonth(), s.start.getFullYear()];\n\t\tconst [endMonth, endYear] = [s.end.getMonth(), s.end.getFullYear()];\n\n\t\tconst noOfMonths = (endMonth - startMonth + 1) + (endYear - startYear) * 12;\n\n\t\tlet domainConfigs = [];\n\n\t\tlet startOfMonth = clone(s.start);\n\t\tfor(var i = 0; i < noOfMonths; i++) {\n\t\t\tlet endDate = s.end;\n\t\t\tif(!areInSameMonth(startOfMonth, s.end)) {\n\t\t\t\tlet [month, year] = [startOfMonth.getMonth(), startOfMonth.getFullYear()];\n\t\t\t\tendDate = getLastDateInMonth(month, year);\n\t\t\t}\n\t\t\tdomainConfigs.push(this.getDomainConfig(startOfMonth, endDate));\n\n\t\t\taddDays(endDate, 1);\n\t\t\tstartOfMonth = endDate;\n\t\t}\n\n\t\treturn domainConfigs;\n\t}\n\n\tgetDomainConfig(startDate, endDate='') {\n\t\tlet [month, year] = [startDate.getMonth(), startDate.getFullYear()];\n\t\tlet startOfWeek = setDayToSunday(startDate); // TODO: Monday as well\n\t\tendDate = clone(endDate) || getLastDateInMonth(month, year);\n\n\t\tlet domainConfig = {\n\t\t\tindex: month,\n\t\t\tcols: []\n\t\t};\n\n\t\taddDays(endDate, 1);\n\t\tlet noOfMonthWeeks = getWeeksBetween(startOfWeek, endDate);\n\n\t\tlet cols = [], col;\n\t\tfor(var i = 0; i < noOfMonthWeeks; i++) {\n\t\t\tcol = this.getCol(startOfWeek, month);\n\t\t\tcols.push(col);\n\n\t\t\tstartOfWeek = new Date(col[NO_OF_DAYS_IN_WEEK - 1].yyyyMmDd);\n\t\t\taddDays(startOfWeek, 1);\n\t\t}\n\n\t\tif(col[NO_OF_DAYS_IN_WEEK - 1].dataValue !== undefined) {\n\t\t\taddDays(startOfWeek, 1);\n\t\t\tcols.push(this.getCol(startOfWeek, month, true));\n\t\t}\n\n\t\tdomainConfig.cols = cols;\n\n\t\treturn domainConfig;\n\t}\n\n\tgetCol(startDate, month, empty = false) {\n\t\tlet s = this.state;\n\n\t\t// startDate is the start of week\n\t\tlet currentDate = clone(startDate);\n\t\tlet col = [];\n\n\t\tfor(var i = 0; i < NO_OF_DAYS_IN_WEEK; i++, addDays(currentDate, 1)) {\n\t\t\tlet config = {};\n\n\t\t\t// Non-generic adjustment for entire heatmap, needs state\n\t\t\tlet currentDateWithinData = currentDate >= s.start && currentDate <= s.end;\n\n\t\t\tif(empty || currentDate.getMonth() !== month || !currentDateWithinData) {\n\t\t\t\tconfig.yyyyMmDd = getYyyyMmDd(currentDate);\n\t\t\t} else {\n\t\t\t\tconfig = this.getSubDomainConfig(currentDate);\n\t\t\t}\n\t\t\tcol.push(config);\n\t\t}\n\n\t\treturn col;\n\t}\n\n\tgetSubDomainConfig(date) {\n\t\tlet yyyyMmDd = getYyyyMmDd(date);\n\t\tlet dataValue = this.data.dataPoints[yyyyMmDd];\n\t\tlet config = {\n\t\t\tyyyyMmDd: yyyyMmDd,\n\t\t\tdataValue: dataValue || 0,\n\t\t\tfill: this.colors[getMaxCheckpoint(dataValue, this.state.distribution)]\n\t\t};\n\t\treturn config;\n\t}\n}\n","import { fillArray } from '../utils/helpers';\nimport {\n    DEFAULT_AXIS_CHART_TYPE,\n    AXIS_DATASET_CHART_TYPES,\n    DEFAULT_CHAR_WIDTH\n} from '../utils/constants';\n\nexport function dataPrep(data, type) {\n    data.labels = data.labels || [];\n\n    let datasetLength = data.labels.length;\n\n    // Datasets\n    let datasets = data.datasets;\n    let zeroArray = new Array(datasetLength).fill(0);\n    if (!datasets) {\n        // default\n        datasets = [\n            {\n                values: zeroArray\n            }\n        ];\n    }\n\n    datasets.map((d) => {\n        // Set valudataPrepes\n        if (!d.values) {\n            d.values = zeroArray;\n        } else {\n            // Check for non values\n            let vals = d.values;\n            vals = vals.map((val) => (!isNaN(val) ? val : 0));\n\n            // Trim or extend\n            if (vals.length > datasetLength) {\n                vals = vals.slice(0, datasetLength);\n            } else {\n                vals = fillArray(vals, datasetLength - vals.length, 0);\n            }\n\n            d.values = vals;\n        }\n\n        // Set type\n        if (!d.chartType) {\n            if (!AXIS_DATASET_CHART_TYPES.includes(type)) type === DEFAULT_AXIS_CHART_TYPE;\n            d.chartType = type;\n        }\n    });\n\n    // Markers\n\n    // Regions\n    // data.yRegions = data.yRegions || [];\n    if (data.yRegions) {\n        data.yRegions.map((d) => {\n            if (d.end < d.start) {\n                [d.start, d.end] = [d.end, d.start];\n            }\n        });\n    }\n\n    return data;\n}\n\nexport function zeroDataPrep(realData) {\n    let datasetLength = realData.labels.length;\n    let zeroArray = new Array(datasetLength).fill(0);\n\n    let zeroData = {\n        labels: realData.labels.slice(0, -1),\n        datasets: realData.datasets.map((d) => {\n            const { axisID } = d;\n            return {\n                axisID,\n                name: '',\n                values: zeroArray.slice(0, -1),\n                chartType: d.chartType\n            };\n        })\n    };\n\n    if (realData.yMarkers) {\n        zeroData.yMarkers = [\n            {\n                value: 0,\n                label: ''\n            }\n        ];\n    }\n\n    if (realData.yRegions) {\n        zeroData.yRegions = [\n            {\n                start: 0,\n                end: 0,\n                label: ''\n            }\n        ];\n    }\n\n    return zeroData;\n}\n\nexport function getShortenedLabels(chartWidth, labels = [], isSeries = true) {\n    let allowedSpace = chartWidth / labels.length;\n    if (allowedSpace <= 0) allowedSpace = 1;\n    let allowedLetters = allowedSpace / DEFAULT_CHAR_WIDTH;\n\n    let seriesMultiple;\n    if (isSeries) {\n        // Find the maximum label length for spacing calculations\n        let maxLabelLength = Math.max(...labels.map((label) => label.length));\n        seriesMultiple = Math.ceil(maxLabelLength / allowedLetters);\n    }\n\n    let calcLabels = labels.map((label, i) => {\n        label += '';\n        if (label.length > allowedLetters) {\n            if (!isSeries) {\n                if (allowedLetters - 3 > 0) {\n                    label = label.slice(0, allowedLetters - 3) + ' ...';\n                } else {\n                    label = label.slice(0, allowedLetters) + '..';\n                }\n            } else {\n                if (i % seriesMultiple !== 0) {\n                    label = '';\n                }\n            }\n        }\n        return label;\n    });\n\n    return calcLabels;\n}\n","import BaseChart from './BaseChart';\nimport { dataPrep, zeroDataPrep, getShortenedLabels } from '../utils/axis-chart-utils';\nimport { AXIS_LEGEND_BAR_SIZE } from '../utils/constants';\nimport { getComponent } from '../objects/ChartComponents';\nimport { getOffset, fire } from '../utils/dom';\nimport {\n    calcChartIntervals,\n    getIntervalSize,\n    getValueRange,\n    getZeroIndex,\n    scale,\n    getClosestInArray\n} from '../utils/intervals';\nimport { floatTwo } from '../utils/helpers';\nimport { makeOverlay, updateOverlay, legendBar } from '../utils/draw';\nimport {\n    getTopOffset,\n    getLeftOffset,\n    MIN_BAR_PERCENT_HEIGHT,\n    BAR_CHART_SPACE_RATIO,\n    LINE_CHART_DOT_SIZE\n} from '../utils/constants';\n\nexport default class AxisChart extends BaseChart {\n    constructor(parent, args) {\n        super(parent, args);\n\n        this.barOptions = args.barOptions || {};\n        this.lineOptions = args.lineOptions || {};\n\n        this.type = args.type || 'line';\n        this.init = 1;\n\n        this.setup();\n    }\n\n    setMeasures() {\n        if (this.data.datasets.length <= 1) {\n            this.config.showLegend = 0;\n            this.measures.paddings.bottom = 30;\n        }\n    }\n\n    configure(options) {\n        super.configure(options);\n        const { axisOptions = {} } = options;\n        const { xAxis, yAxis } = axisOptions || {};\n\n        options.tooltipOptions = options.tooltipOptions || {};\n\n        this.config.xAxisMode = xAxis ? xAxis.xAxisMode : axisOptions.xAxisMode || 'span';\n\n        // this will pass an array\n        // lets determine if we need two yAxis based on if there is length\n        // to the yAxis array\n        if (yAxis && yAxis.length) {\n            this.config.yAxisConfig = yAxis.map((item) => {\n                return {\n                    yAxisMode: item.yAxisMode,\n                    id: item.id,\n                    position: item.position,\n                    title: item.title\n                };\n            });\n        } else {\n            this.config.yAxisMode = axisOptions.yAxisMode || 'span';\n        }\n\n        this.config.xIsSeries = axisOptions.xIsSeries || 0;\n        this.config.shortenYAxisNumbers = axisOptions.shortenYAxisNumbers || 0;\n\n        this.config.formatTooltipX = options.tooltipOptions.formatTooltipX;\n        this.config.formatTooltipY = options.tooltipOptions.formatTooltipY;\n\n        this.config.valuesOverPoints = options.valuesOverPoints;\n    }\n\n    prepareData(data = this.data) {\n        return dataPrep(data, this.type);\n    }\n\n    prepareFirstData(data = this.data) {\n        return zeroDataPrep(data);\n    }\n\n    calc(onlyWidthChange = false) {\n        this.calcXPositions();\n        if (!onlyWidthChange) {\n            this.calcYAxisParameters(this.getAllYValues(), this.type === 'line');\n        }\n        this.makeDataByIndex();\n    }\n\n    calcXPositions() {\n        let s = this.state;\n        let labels = this.data.labels;\n        s.datasetLength = labels.length;\n\n        s.unitWidth = this.width / s.datasetLength;\n        // Default, as per bar, and mixed. Only line will be a special case\n        s.xOffset = s.unitWidth / 2;\n\n        // // For a pure Line Chart\n        // s.unitWidth = this.width/(s.datasetLength - 1);\n        // s.xOffset = 0;\n\n        s.xAxis = {\n            labels: labels,\n            positions: labels.map((d, i) => floatTwo(s.xOffset + i * s.unitWidth))\n        };\n    }\n\n    calcYAxisParameters(dataValues, withMinimum = 'false') {\n        let yPts, scaleMultiplier, intervalHeight, zeroLine, positions;\n\n        // if we have an object we have multiple yAxisParameters.\n        if (dataValues instanceof Array) {\n            yPts = calcChartIntervals(dataValues, withMinimum);\n            scaleMultiplier = this.height / getValueRange(yPts);\n            intervalHeight = getIntervalSize(yPts) * scaleMultiplier;\n            zeroLine = this.height - getZeroIndex(yPts) * intervalHeight;\n            this.state.yAxis = {\n                labels: yPts,\n                positions: yPts.map((d) => zeroLine - d * scaleMultiplier),\n                scaleMultiplier: scaleMultiplier,\n                zeroLine: zeroLine\n            };\n        } else {\n            this.state.yAxis = [];\n            for (let key in dataValues) {\n                const dataValue = dataValues[key];\n                yPts = calcChartIntervals(dataValue, withMinimum);\n                scaleMultiplier = this.height / getValueRange(yPts);\n                intervalHeight = getIntervalSize(yPts) * scaleMultiplier;\n                zeroLine = this.height - getZeroIndex(yPts) * intervalHeight;\n                positions = yPts.map((d) => zeroLine - d * scaleMultiplier);\n\n                const yAxisConfigObject =\n                    this.config.yAxisConfig.find((item) => key === item.id) || [];\n                const yAxisAlignment = yAxisConfigObject\n                    ? yAxisConfigObject.position\n                    : 'right';\n\n                if (this.state.yAxis.length) {\n                    const yPtsArray = [];\n                    const firstArr = this.state.yAxis[0];\n                    // we need to loop through original positions.\n                    firstArr.positions.forEach((pos) => {\n                        yPtsArray.push(Math.ceil(pos / scaleMultiplier));\n                    });\n                    yPts = yPtsArray.reverse();\n                    zeroLine = this.height - getZeroIndex(yPts) * intervalHeight;\n                    positions = firstArr.positions;\n                }\n\n                this.state.yAxis.push({\n                    axisID: key || 'left-axis',\n                    labels: yPts,\n                    title: yAxisConfigObject.title,\n                    pos: yAxisAlignment,\n                    scaleMultiplier,\n                    zeroLine,\n                    positions\n                });\n            }\n        }\n\n        // Dependent if above changes\n        this.calcDatasetPoints();\n        this.calcYExtremes();\n        this.calcYRegions();\n    }\n\n    calcDatasetPoints() {\n        let s = this.state;\n        let scaleAll = (values, id) => {\n            return values.map((val) => {\n                let { yAxis } = s;\n\n                if (yAxis instanceof Array) {\n                    yAxis = yAxis.find((axis) => id === axis.axisID);\n                }\n\n                return scale(val, yAxis);\n            });\n        };\n\n        s.barChartIndex = 1;\n        s.datasets = this.data.datasets.map((d, i) => {\n            let values = d.values;\n            let cumulativeYs = d.cumulativeYs || [];\n\n            return {\n                name:\n                    d.name &&\n                    d.name.replace(/<|>|&/g, (char) =>\n                        char == '&' ? '&amp;' : char == '<' ? '&lt;' : '&gt;'\n                    ),\n                index: i,\n                barIndex: d.chartType === 'bar' ? s.barChartIndex++ : s.barChartIndex,\n                chartType: d.chartType,\n\n                values: values,\n                yPositions: scaleAll(values, d.axisID),\n                id: d.axisID,\n\n                cumulativeYs: cumulativeYs,\n                cumulativeYPos: scaleAll(cumulativeYs, d.axisID)\n            };\n        });\n    }\n\n    calcYExtremes() {\n        let s = this.state;\n        if (this.barOptions.stacked) {\n            s.yExtremes = s.datasets[s.datasets.length - 1].cumulativeYPos;\n            return;\n        }\n\n        s.yExtremes = new Array(s.datasetLength).fill(9999);\n        s.datasets.map((d) => {\n            d.yPositions.map((pos, j) => {\n                if (pos < s.yExtremes[j]) {\n                    s.yExtremes[j] = pos;\n                }\n            });\n        });\n    }\n\n    calcYRegions() {\n        let s = this.state;\n        if (this.data.yMarkers) {\n            this.state.yMarkers = this.data.yMarkers.map((d) => {\n                d.position = scale(d.value, s.yAxis);\n                if (!d.options) d.options = {};\n                // if(!d.label.includes(':')) {\n                // \td.label += ': ' + d.value;\n                // }\n                return d;\n            });\n        }\n        if (this.data.yRegions) {\n            this.state.yRegions = this.data.yRegions.map((d) => {\n                d.startPos = scale(d.start, s.yAxis);\n                d.endPos = scale(d.end, s.yAxis);\n                if (!d.options) d.options = {};\n                return d;\n            });\n        }\n    }\n\n    getAllYValues() {\n        let key = 'values';\n        let multiAxis = this.config.yAxisConfig ? true : false;\n        let allValueLists = multiAxis ? {} : [];\n\n        let groupBy = (arr, property) => {\n            return arr.reduce((acc, cur) => {\n                acc[cur[property]] = [...(acc[cur[property]] || []), cur];\n                return acc;\n            }, {});\n        };\n\n        let generateCumulative = (arr) => {\n            let cumulative = new Array(this.state.datasetLength).fill(0);\n            arr.forEach((d, i) => {\n                let values = arr[i].values;\n                d[key] = cumulative = cumulative.map((c, i) => {\n                    return c + values[i];\n                });\n            });\n        };\n\n        if (this.barOptions.stacked) {\n            key = 'cumulativeYs';\n            // we need to filter out the different yAxis ID's here.\n            if (multiAxis) {\n                const groupedDataSets = groupBy(this.data.datasets, 'axisID');\n                // const dataSetsByAxis = this.data.dd\n                for (var axisID in groupedDataSets) {\n                    generateCumulative(groupedDataSets[axisID]);\n                }\n            } else {\n                generateCumulative(this.data.datasets);\n            }\n        }\n\n        // this is the trouble maker, we don't want to merge all\n        // datasets since we are trying to run two yAxis.\n        if (multiAxis) {\n            this.data.datasets.forEach((d) => {\n                // if the array exists already just push more data into it.\n                // otherwise create a new array into the object.\n                allValueLists[d.axisID || key]\n                    ? allValueLists[d.axisID || key].push(...d[key])\n                    : (allValueLists[d.axisID || key] = [...d[key]]);\n            });\n        } else {\n            allValueLists = this.data.datasets.map((d) => {\n                return d[key];\n            });\n        }\n\n        if (this.data.yMarkers && !multiAxis) {\n            allValueLists.push(this.data.yMarkers.map((d) => d.value));\n        }\n\n        if (this.data.yRegions && !multiAxis) {\n            this.data.yRegions.map((d) => {\n                allValueLists.push([d.end, d.start]);\n            });\n        }\n\n        return multiAxis ? allValueLists : [].concat(...allValueLists);\n    }\n\n    setupComponents() {\n        let componentConfigs = [\n            [\n                'xAxis',\n                {\n                    mode: this.config.xAxisMode,\n                    height: this.height\n                    // pos: 'right'\n                },\n                function () {\n                    let s = this.state;\n                    s.xAxis.calcLabels = getShortenedLabels(\n                        this.width,\n                        s.xAxis.labels,\n                        this.config.xIsSeries\n                    );\n\n                    return s.xAxis;\n                }.bind(this)\n            ],\n            [\n                'yRegions',\n                {\n                    width: this.width,\n                    pos: 'right'\n                },\n                function () {\n                    return this.state.yRegions;\n                }.bind(this)\n            ]\n        ];\n\n        // if we have multiple yAxisConfigs we need to update the yAxisDefault\n        // components to multiple yAxis components.\n        if (this.config.yAxisConfig && this.config.yAxisConfig.length) {\n            this.config.yAxisConfig.forEach((yAxis) => {\n                componentConfigs.push([\n                    'yAxis',\n                    {\n                        mode: this.config.yAxisMode,\n                        width: this.width,\n                        shortenNumbers: this.config.shortenYAxisNumbers,\n                        pos: yAxis.position || 'left'\n                    },\n                    function () {\n                        return this.state.yAxis;\n                    }.bind(this)\n                ]);\n            });\n        } else {\n            componentConfigs.push([\n                'yAxis',\n                {\n                    mode: this.config.yAxisMode,\n                    width: this.width,\n                    shortenNumbers: this.config.shortenYAxisNumbers\n                },\n                function () {\n                    return this.state.yAxis;\n                }.bind(this)\n            ]);\n        }\n\n        let barDatasets = this.state.datasets.filter((d) => d.chartType === 'bar');\n        let lineDatasets = this.state.datasets.filter((d) => d.chartType === 'line');\n\n        let barsConfigs = barDatasets.map((d) => {\n            let index = d.index;\n            let barIndex = d.barIndex || index;\n            return [\n                'barGraph' + '-' + d.index,\n                {\n                    index: index,\n                    color: this.colors[index],\n                    stacked: this.barOptions.stacked,\n\n                    // same for all datasets\n                    valuesOverPoints: this.config.valuesOverPoints,\n                    minHeight: this.height * MIN_BAR_PERCENT_HEIGHT\n                },\n                function () {\n                    let s = this.state;\n                    let { yAxis } = s;\n                    let d = s.datasets[index];\n                    let { id = 'left-axis' } = d;\n                    let stacked = this.barOptions.stacked;\n\n                    let spaceRatio = this.barOptions.spaceRatio || BAR_CHART_SPACE_RATIO;\n                    let barsWidth = s.unitWidth * (1 - spaceRatio);\n                    let barWidth = barsWidth / (stacked ? 1 : barDatasets.length);\n\n                    // if there are multiple yAxis we need to return the yAxis with the\n                    // proper ID.\n                    if (yAxis instanceof Array) {\n                        yAxis = yAxis.find((axis) => id === axis.axisID);\n                    }\n\n                    let xPositions = s.xAxis.positions.map((x) => x - barsWidth / 2);\n\n                    if (!stacked) {\n                        xPositions = xPositions.map((p) => {\n                            return p + barWidth * barIndex - barWidth;\n                        });\n                    }\n\n                    let labels = new Array(s.datasetLength).fill('');\n                    if (this.config.valuesOverPoints) {\n                        if (stacked && d.index === s.datasets.length - 1) {\n                            labels = d.cumulativeYs;\n                        } else {\n                            labels = d.values;\n                        }\n                    }\n\n                    let offsets = new Array(s.datasetLength).fill(0);\n                    if (stacked) {\n                        offsets = d.yPositions.map((y, j) => y - d.cumulativeYPos[j]);\n                    }\n\n                    return {\n                        xPositions: xPositions,\n                        yPositions: d.yPositions,\n                        offsets: offsets,\n                        // values: d.values,\n                        labels: labels,\n\n                        zeroLine: yAxis.zeroLine,\n                        barsWidth: barsWidth,\n                        barWidth: barWidth\n                    };\n                }.bind(this)\n            ];\n        });\n\n        let lineConfigs = lineDatasets.map((d) => {\n            let index = d.index;\n            return [\n                'lineGraph' + '-' + d.index,\n                {\n                    index: index,\n                    color: this.colors[index],\n                    svgDefs: this.svgDefs,\n                    heatline: this.lineOptions.heatline,\n                    regionFill: this.lineOptions.regionFill,\n                    spline: this.lineOptions.spline,\n                    hideDots: this.lineOptions.hideDots,\n                    hideLine: this.lineOptions.hideLine,\n\n                    // same for all datasets\n                    valuesOverPoints: this.config.valuesOverPoints\n                },\n                function () {\n                    let s = this.state;\n                    let d = s.datasets[index];\n\n                    // if we have more than one yindex lets map the values\n                    const yAxis = s.yAxis.length\n                        ? s.yAxis.find((axis) => d.id === axis.axisID)\n                        : s.yAxis;\n\n                    let minLine =\n                        yAxis.positions[0] < yAxis.zeroLine\n                            ? yAxis.positions[0]\n                            : yAxis.zeroLine;\n\n                    return {\n                        xPositions: s.xAxis.positions,\n                        yPositions: d.yPositions,\n\n                        values: d.values,\n\n                        zeroLine: minLine,\n                        radius: this.lineOptions.dotSize || LINE_CHART_DOT_SIZE\n                    };\n                }.bind(this)\n            ];\n        });\n\n        let markerConfigs = [\n            [\n                'yMarkers',\n                {\n                    width: this.width,\n                    pos: 'right'\n                },\n                function () {\n                    return this.state.yMarkers;\n                }.bind(this)\n            ]\n        ];\n\n        componentConfigs = componentConfigs.concat(barsConfigs, lineConfigs, markerConfigs);\n\n        let optionals = ['yMarkers', 'yRegions'];\n        this.dataUnitComponents = [];\n\n        this.components = new Map(\n            componentConfigs\n                .filter((args) => !optionals.includes(args[0]) || this.state[args[0]])\n                .map((args) => {\n                    let component = getComponent(...args);\n                    if (args[0]) {\n                        if (args[0].includes('lineGraph') || args[0].includes('barGraph')) {\n                            this.dataUnitComponents.push(component);\n                        }\n\n                        return [args[0], component];\n                    }\n                })\n        );\n    }\n\n    makeDataByIndex() {\n        this.dataByIndex = {};\n\n        let s = this.state;\n        let formatX = this.config.formatTooltipX;\n        let formatY = this.config.formatTooltipY;\n        let titles = s.xAxis.labels;\n\n        titles.map((label, index) => {\n            let values = this.state.datasets.map((set, i) => {\n                let value = set.values[index];\n                return {\n                    title: set.name,\n                    value: value,\n                    yPos: set.yPositions[index],\n                    color: this.colors[i],\n                    formatted: formatY ? formatY(value) : value\n                };\n            });\n\n            this.dataByIndex[index] = {\n                label: label,\n                formattedLabel: formatX ? formatX(label) : label,\n                xPos: s.xAxis.positions[index],\n                values: values,\n                yExtreme: s.yExtremes[index]\n            };\n        });\n    }\n\n    bindTooltip() {\n        // NOTE: could be in tooltip itself, as it is a given functionality for its parent\n        this.container.addEventListener('mousemove', (e) => {\n            let m = this.measures;\n            let o = getOffset(this.container);\n            let relX = e.pageX - o.left - getLeftOffset(m);\n            let relY = e.pageY - o.top;\n\n            if (relY < this.height + getTopOffset(m) && relY > getTopOffset(m)) {\n                this.mapTooltipXPosition(relX);\n            } else {\n                this.tip.hideTip();\n            }\n        });\n    }\n\n    mapTooltipXPosition(relX) {\n        let s = this.state;\n        if (!s.yExtremes) return;\n\n        let index = getClosestInArray(relX, s.xAxis.positions, true);\n        if (index >= 0) {\n            let dbi = this.dataByIndex[index];\n\n            this.tip.setValues(\n                dbi.xPos + this.tip.offset.x,\n                dbi.yExtreme + this.tip.offset.y,\n                { name: dbi.formattedLabel, value: '' },\n                dbi.values,\n                index\n            );\n\n            this.tip.showTip();\n        }\n    }\n\n    renderLegend() {\n        let s = this.data;\n        if (s.datasets.length > 1) {\n            this.legendArea.textContent = '';\n            s.datasets.map((d, i) => {\n                let barWidth = AXIS_LEGEND_BAR_SIZE;\n                // let rightEndPoint = this.baseWidth - this.measures.margins.left - this.measures.margins.right;\n                // let multiplier = s.datasets.length - i;\n                let rect = legendBar(\n                    // rightEndPoint - multiplier * barWidth,\t// To right align\n                    barWidth * i,\n                    '0',\n                    barWidth,\n                    this.colors[i],\n                    d.name,\n                    this.config.truncateLegends\n                );\n                this.legendArea.appendChild(rect);\n            });\n        }\n    }\n\n    // Overlay\n    makeOverlay() {\n        if (this.init) {\n            this.init = 0;\n            return;\n        }\n        if (this.overlayGuides) {\n            this.overlayGuides.forEach((g) => {\n                let o = g.overlay;\n                o.parentNode.removeChild(o);\n            });\n        }\n\n        this.overlayGuides = this.dataUnitComponents.map((c) => {\n            return {\n                type: c.unitType,\n                overlay: undefined,\n                units: c.units\n            };\n        });\n\n        if (this.state.currentIndex === undefined) {\n            this.state.currentIndex = this.state.datasetLength - 1;\n        }\n\n        // Render overlays\n        this.overlayGuides.map((d) => {\n            let currentUnit = d.units[this.state.currentIndex];\n\n            d.overlay = makeOverlay[d.type](currentUnit);\n            this.drawArea.appendChild(d.overlay);\n        });\n    }\n\n    updateOverlayGuides() {\n        if (this.overlayGuides) {\n            this.overlayGuides.forEach((g) => {\n                let o = g.overlay;\n                o.parentNode.removeChild(o);\n            });\n        }\n    }\n\n    bindOverlay() {\n        this.parent.addEventListener('data-select', () => {\n            this.updateOverlay();\n        });\n    }\n\n    bindUnits() {\n        this.dataUnitComponents.map((c) => {\n            c.units.map((unit) => {\n                unit.addEventListener('click', () => {\n                    let index = unit.getAttribute('data-point-index');\n                    this.setCurrentDataPoint(index);\n                });\n            });\n        });\n\n        // Note: Doesn't work as tooltip is absolutely positioned\n        this.tip.container.addEventListener('click', () => {\n            let index = this.tip.container.getAttribute('data-point-index');\n            this.setCurrentDataPoint(index);\n        });\n    }\n\n    updateOverlay() {\n        this.overlayGuides.map((d) => {\n            let currentUnit = d.units[this.state.currentIndex];\n            updateOverlay[d.type](currentUnit, d.overlay);\n        });\n    }\n\n    onLeftArrow() {\n        this.setCurrentDataPoint(this.state.currentIndex - 1);\n    }\n\n    onRightArrow() {\n        this.setCurrentDataPoint(this.state.currentIndex + 1);\n    }\n\n    getDataPoint(index = this.state.currentIndex) {\n        let s = this.state;\n        let data_point = {\n            index: index,\n            label: s.xAxis.labels[index],\n            values: s.datasets.map((d) => d.values[index])\n        };\n        return data_point;\n    }\n\n    setCurrentDataPoint(index) {\n        let s = this.state;\n        index = parseInt(index);\n        if (index < 0) index = 0;\n        if (index >= s.xAxis.labels.length) index = s.xAxis.labels.length - 1;\n        if (index === s.currentIndex) return;\n        s.currentIndex = index;\n        fire(this.parent, 'data-select', this.getDataPoint());\n    }\n\n    // API\n    addDataPoint(label, datasetValues, index = this.state.datasetLength) {\n        super.addDataPoint(label, datasetValues, index);\n        this.data.labels.splice(index, 0, label);\n        this.data.datasets.map((d, i) => {\n            d.values.splice(index, 0, datasetValues[i]);\n        });\n        this.update(this.data);\n    }\n\n    removeDataPoint(index = this.state.datasetLength - 1) {\n        if (this.data.labels.length <= 1) {\n            return;\n        }\n        super.removeDataPoint(index);\n        this.data.labels.splice(index, 1);\n        this.data.datasets.map((d) => {\n            d.values.splice(index, 1);\n        });\n        this.update(this.data);\n    }\n\n    updateDataset(datasetValues, index = 0) {\n        this.data.datasets[index].values = datasetValues;\n        this.update(this.data);\n    }\n    // addDataset(dataset, index) {}\n    // removeDataset(index = 0) {}\n\n    updateDatasets(datasets) {\n        this.data.datasets.map((d, i) => {\n            if (datasets[i]) {\n                d.values = datasets[i];\n            }\n        });\n        this.update(this.data);\n    }\n\n    // updateDataPoint(dataPoint, index = 0) {}\n    // addDataPoint(dataPoint, index = 0) {}\n    // removeDataPoint(index = 0) {}\n}\n","import AggregationChart from './AggregationChart';\nimport { getComponent } from '../objects/ChartComponents';\nimport { getOffset } from '../utils/dom';\nimport { getPositionByAngle } from '../utils/helpers';\nimport { makeArcStrokePathStr, makeStrokeCircleStr } from '../utils/draw';\nimport { lightenDarkenColor } from '../utils/colors';\nimport { transform } from '../utils/animation';\nimport { FULL_ANGLE } from '../utils/constants';\n\nexport default class DonutChart extends AggregationChart {\n\tconstructor(parent, args) {\n\t\tsuper(parent, args);\n\t\tthis.type = 'donut';\n\t\tthis.initTimeout = 0;\n\t\tthis.init = 1;\n\n\t\tthis.setup();\n\t}\n\n\tconfigure(args) {\n\t\tsuper.configure(args);\n\t\tthis.mouseMove = this.mouseMove.bind(this);\n\t\tthis.mouseLeave = this.mouseLeave.bind(this);\n\n\t\tthis.hoverRadio = args.hoverRadio || 0.1;\n\t\tthis.config.startAngle = args.startAngle || 0;\n\n\t\tthis.clockWise = args.clockWise || false;\n\t\tthis.strokeWidth = args.strokeWidth || 30;\n\t}\n\n\tcalc() {\n\t\tsuper.calc();\n\t\tlet s = this.state;\n\t\tthis.radius =\n\t\t\tthis.height > this.width\n\t\t\t\t? this.center.x - this.strokeWidth / 2\n\t\t\t\t: this.center.y - this.strokeWidth / 2;\n\n\t\tconst { radius, clockWise } = this;\n\n\t\tconst prevSlicesProperties = s.slicesProperties || [];\n\t\ts.sliceStrings = [];\n\t\ts.slicesProperties = [];\n\t\tlet curAngle = 180 - this.config.startAngle;\n\n\t\ts.sliceTotals.map((total, i) => {\n\t\t\tconst startAngle = curAngle;\n\t\t\tconst originDiffAngle = (total / s.grandTotal) * FULL_ANGLE;\n\t\t\tconst largeArc = originDiffAngle > 180 ? 1: 0;\n\t\t\tconst diffAngle = clockWise ? -originDiffAngle : originDiffAngle;\n\t\t\tconst endAngle = curAngle = curAngle + diffAngle;\n\t\t\tconst startPosition = getPositionByAngle(startAngle, radius);\n\t\t\tconst endPosition = getPositionByAngle(endAngle, radius);\n\n\t\t\tconst prevProperty = this.init && prevSlicesProperties[i];\n\n\t\t\tlet curStart,curEnd;\n\t\t\tif(this.init) {\n\t\t\t\tcurStart = prevProperty ? prevProperty.startPosition : startPosition;\n\t\t\t\tcurEnd = prevProperty ? prevProperty.endPosition : startPosition;\n\t\t\t} else {\n\t\t\t\tcurStart = startPosition;\n\t\t\t\tcurEnd = endPosition;\n\t\t\t}\n\t\t\tconst curPath =\n\t\t\t\toriginDiffAngle === 360\n\t\t\t\t\t? makeStrokeCircleStr(curStart, curEnd, this.center, this.radius, this.clockWise, largeArc)\n\t\t\t\t\t: makeArcStrokePathStr(curStart, curEnd, this.center, this.radius, this.clockWise, largeArc);\n\n\t\t\ts.sliceStrings.push(curPath);\n\t\t\ts.slicesProperties.push({\n\t\t\t\tstartPosition,\n\t\t\t\tendPosition,\n\t\t\t\tvalue: total,\n\t\t\t\ttotal: s.grandTotal,\n\t\t\t\tstartAngle,\n\t\t\t\tendAngle,\n\t\t\t\tangle: diffAngle\n\t\t\t});\n\n\t\t});\n\t\tthis.init = 0;\n\t}\n\n\tsetupComponents() {\n\t\tlet s = this.state;\n\n\t\tlet componentConfigs = [\n\t\t\t[\n\t\t\t\t'donutSlices',\n\t\t\t\t{ },\n\t\t\t\tfunction() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsliceStrings: s.sliceStrings,\n\t\t\t\t\t\tcolors: this.colors,\n\t\t\t\t\t\tstrokeWidth: this.strokeWidth,\n\t\t\t\t\t};\n\t\t\t\t}.bind(this)\n\t\t\t]\n\t\t];\n\n\t\tthis.components = new Map(componentConfigs\n\t\t\t.map(args => {\n\t\t\t\tlet component = getComponent(...args);\n\t\t\t\treturn [args[0], component];\n\t\t\t}));\n\t}\n\n\tcalTranslateByAngle(property){\n\t\tconst{ radius, hoverRadio } = this;\n\t\tconst position = getPositionByAngle(property.startAngle+(property.angle / 2),radius);\n\t\treturn `translate3d(${(position.x) * hoverRadio}px,${(position.y) * hoverRadio}px,0)`;\n\t}\n\n\thoverSlice(path,i,flag,e){\n\t\tif(!path) return;\n\t\tconst color = this.colors[i];\n\t\tif(flag) {\n\t\t\ttransform(path, this.calTranslateByAngle(this.state.slicesProperties[i]));\n\t\t\tpath.style.stroke = lightenDarkenColor(color, 50);\n\t\t\tlet g_off = getOffset(this.svg);\n\t\t\tlet x = e.pageX - g_off.left + 10;\n\t\t\tlet y = e.pageY - g_off.top - 10;\n\t\t\tlet title = (this.formatted_labels && this.formatted_labels.length > 0\n\t\t\t\t? this.formatted_labels[i] : this.state.labels[i]) + ': ';\n\t\t\tlet percent = (this.state.sliceTotals[i] * 100 / this.state.grandTotal).toFixed(1);\n\t\t\tthis.tip.setValues(x, y, {name: title, value: percent + \"%\"});\n\t\t\tthis.tip.showTip();\n\t\t} else {\n\t\t\ttransform(path,'translate3d(0,0,0)');\n\t\t\tthis.tip.hideTip();\n\t\t\tpath.style.stroke = color;\n\t\t}\n\t}\n\n\tbindTooltip() {\n\t\tthis.container.addEventListener('mousemove', this.mouseMove);\n\t\tthis.container.addEventListener('mouseleave', this.mouseLeave);\n\t}\n\n\tmouseMove(e){\n\t\tconst target = e.target;\n\t\tlet slices = this.components.get('donutSlices').store;\n\t\tlet prevIndex = this.curActiveSliceIndex;\n\t\tlet prevAcitve = this.curActiveSlice;\n\t\tif(slices.includes(target)) {\n\t\t\tlet i = slices.indexOf(target);\n\t\t\tthis.hoverSlice(prevAcitve, prevIndex,false);\n\t\t\tthis.curActiveSlice = target;\n\t\t\tthis.curActiveSliceIndex = i;\n\t\t\tthis.hoverSlice(target, i, true, e);\n\t\t} else {\n\t\t\tthis.mouseLeave();\n\t\t}\n\t}\n\n\tmouseLeave(){\n\t\tthis.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,false);\n\t}\n}\n","import '../css/charts.scss';\n\n// import MultiAxisChart from './charts/MultiAxisChart';\nimport PercentageChart from './charts/PercentageChart';\nimport PieChart from './charts/PieChart';\nimport Heatmap from './charts/Heatmap';\nimport AxisChart from './charts/AxisChart';\nimport DonutChart from './charts/DonutChart';\n\nconst chartTypes = {\n\tbar: AxisChart,\n\tline: AxisChart,\n\t// multiaxis: MultiAxisChart,\n\tpercentage: PercentageChart,\n\theatmap: Heatmap,\n\tpie: PieChart,\n\tdonut: DonutChart,\n};\n\nfunction getChartByType(chartType = 'line', parent, options) {\n\tif (chartType === 'axis-mixed') {\n\t\toptions.type = 'line';\n\t\treturn new AxisChart(parent, options);\n\t}\n\n\tif (!chartTypes[chartType]) {\n\t\tconsole.error(\"Undefined chart type: \" + chartType);\n\t\treturn;\n\t}\n\n\treturn new chartTypes[chartType](parent, options);\n}\n\nclass Chart {\n\tconstructor(parent, options) {\n\t\treturn getChartByType(options.type, parent, options);\n\t}\n}\n\nexport { Chart, PercentageChart, PieChart, Heatmap, AxisChart };","import * as Charts from './chart';\n\nlet frappe     = { };\n\nfrappe.NAME    = 'Frappe Charts';\nfrappe.VERSION = '1.6.2';\n\nfrappe         = Object.assign({ }, frappe, Charts);\n\nexport default frappe;"],"names":["$","expr","con","document","querySelector","create","tag","o","element","createElement","i","val","appendChild","ref","parentNode","insertBefore","keys","map","style","prop","setAttribute","getOffset","rect","getBoundingClientRect","top","documentElement","scrollTop","body","left","scrollLeft","isHidden","el","offsetParent","isElementInViewport","bottom","window","innerHeight","clientHeight","right","innerWidth","clientWidth","getElementContentWidth","styles","getComputedStyle","padding","parseFloat","paddingLeft","paddingRight","fire","target","type","properties","evt","createEvent","initEvent","j","dispatchEvent","BASE_MEASURES","getTopOffset","m","titleHeight","margins","paddings","getLeftOffset","getExtraHeight","totalExtraHeight","legendHeight","getExtraWidth","totalExtraWidth","INIT_CHART_UPDATE_TIMEOUT","CHART_POST_ANIMATE_TIMEOUT","DEFAULT_AXIS_CHART_TYPE","AXIS_DATASET_CHART_TYPES","AXIS_LEGEND_BAR_SIZE","BAR_CHART_SPACE_RATIO","MIN_BAR_PERCENT_HEIGHT","LINE_CHART_DOT_SIZE","DOT_OVERLAY_SIZE_INCR","PERCENTAGE_BAR_DEFAULT_HEIGHT","PERCENTAGE_BAR_DEFAULT_DEPTH","HEATMAP_DISTRIBUTION_SIZE","HEATMAP_SQUARE_SIZE","HEATMAP_GUTTER_SIZE","DEFAULT_CHAR_WIDTH","TOOLTIP_POINTER_TRIANGLE_HEIGHT","DEFAULT_CHART_COLORS","HEATMAP_COLORS_GREEN","DEFAULT_COLORS","ANGLE_RATIO","Math","PI","FULL_ANGLE","SvgTip","parent","colors","titleName","titleValue","listValues","titleValueFirst","x","y","setup","makeTooltip","fill","calcPosition","container","hideTip","title","dataPointList","addEventListener","index","innerHTML","set","color","value","formatted","li","width","offsetWidth","offsetHeight","maxLeft","pointer","delta","pointerOffset","name","valueFirst","refresh","opacity","floatTwo","d","toFixed","fillArray","array","count","start","length","fillerArray","Array","abs","concat","getStringWidth","string","charWidth","getPositionByAngle","angle","radius","sin","cos","isValidNumber","candidate","nonNegative","Number","isNaN","undefined","isFinite","round","deepClone","cloned","key","Date","getTime","isArray","getBarHeightAndYAttr","yTop","zeroLine","height","equilizeNoOfElements","array1","array2","extraCount","truncateString","txt","len","slice","shortenLargeNumber","label","number","p","floor","log10","l","shortened","pow","getSplineCurvePointsStr","xList","yList","points","push","smoothing","line","pointA","pointB","lengthX","lengthY","sqrt","atan2","controlPoint","current","previous","next","reverse","n","bezierCommand","point","a","cps","cpe","pointStr","command","reduce","acc","PRESET_COLOR_MAP","limitColor","r","lightenDarkenColor","amt","col","getColor","usePound","num","parseInt","b","g","toString","isValidColor","HEX_RE","RGB_RE","test","exec","c","ch","AXIS_TICK_LENGTH","LABEL_MARGIN","LABEL_MAX_CHARS","FONT_SIZE","BASE_LINE_COLOR","FONT_FILL","createSVG","createElementNS","renderVerticalGradient","svgDefElem","gradientId","setGradientStop","gradElem","offset","makeSVGContainer","className","makeSVGDefs","svgContainer","makeSVGGroup","transform","args","inside","makePath","pathStr","stroke","strokeWidth","makeArcPathStr","startPosition","endPosition","center","clockWise","largeArc","arcStartX","arcStartY","arcEndX","arcEndY","makeCircleStr","midArc","makeArcStrokePathStr","makeStrokeCircleStr","makeGradient","lighter","gradientDef","opacities","percentageBar","depth","heatSquare","size","data","legendBar","truncate","text","group","legendDot","makeText","content","options","fontSize","dy","textAnchor","makeVertLine","y1","y2","makeHoriLine","x1","x2","lineType","alignment","shortenNumbers","generateAxisLabel","position","rotation","labelSvg","yLine","pos","mode","xLine","yMarker","labelPos","yRegion","region","datasetBar","meta","minHeight","datasetDot","dot","getPaths","pointsList","pointsStr","join","spline","path","heatline","gradient_id","svgDefs","paths","regionFill","gradient_id_region","makeOverlay","unit","transformValue","nodeName","getAttribute","childNodes","overlay","cloneNode","updateOverlay","attributes","values","filter","attr","includes","specified","nodeValue","UNIT_ANIM_DUR","PATH_ANIM_DUR","MARKER_LINE_ANIM_DUR","REPLACE_ALL_NEW_DUR","STD_EASING","translate","oldCoord","newCoord","duration","old","translateVertLine","newX","oldX","translateHoriLine","newY","oldY","animateRegion","rectGroup","newY1","newY2","oldY2","newHeight","rectAnim","groupAnim","animateBar","bar","oldCoordStr","split","animateDot","cx","cy","animatePath","newXList","newYList","pathComponents","animPath","regStartPt","regEndPt","animRegion","animatePathStr","oldPath","EASING","animateSVGElement","props","dur","easingType","oldValues","animElement","newElement","attributeName","animateElement","currentValue","animAttr","webkitTransform","msTransform","mozTransform","oTransform","animateSVG","elements","newElements","animElements","replaceChild","animSvg","runSMILAnimation","svgElement","elementsToAnimate","animSvgElement","removeChild","CSSTEXT","downloadFile","filename","blob","Blob","url","URL","createObjectURL","href","download","click","revokeObjectURL","prepareForExport","svg","clone","classList","add","styleEl","firstChild","BaseChart","HTMLElement","Error","rawChartArgs","realData","prepareData","prepareFirstData","log","validateColors","config","isNavigable","animate","truncateLegends","measures","JSON","parse","stringify","setMeasures","showLegend","argHeight","baseHeight","state","initTimeout","overlays","configure","validColors","forEach","warn","boundDrawFn","draw","ResizeObserver","resizeObserver","observe","disconnect","removeEventListener","makeContainer","updateWidth","independentWidth","tip","bindTooltip","onlyWidthChange","init","calc","makeChartArea","setupComponents","components","drawArea","render","update","renderLegend","setupNavigation","baseWidth","titleEL","titleFontSize","legendArea","updateTipOffset","Map","error","make","updateNav","bindUnits","bindOverlay","keyActions","onEnterKey","bind","onLeftArrow","onUpArrow","onRightArrow","onDownArrow","e","event","keyCode","chartSvg","AggregationChart","formatTooltipY","tooltipOptions","maxSlices","maxLegendPoints","s","sliceTotals","allTotals","labels","total","datasets","totals","sort","remaining","sumOfRemaining","grandTotal","textContent","legendTotals","barWidth","divisor","NO_OF_YEAR_MONTHS","NO_OF_DAYS_IN_WEEK","NO_OF_MILLIS","SEC_IN_DAY","MONTH_NAMES","DAY_NAMES_SHORT","treatAsUtc","date","result","setMinutes","getMinutes","getTimezoneOffset","getYyyyMmDd","dd","getDate","mm","getMonth","getFullYear","getWeeksBetween","startDate","endDate","weekStartDate","setDayToSunday","ceil","getDaysBetween","millisecondsPerDay","areInSameMonth","getMonthName","short","monthName","getLastDateInMonth","month","year","newDate","day","getDay","addDays","numberOfDays","setDate","ChartComponent","layerClass","layerTransform","constants","getData","makeElements","animateElements","store","layer","oldData","componentConfigs","sliceStrings","transition","newData","xPositions","widths","barHeight","barDepth","item","positions","animateMultipleElements","newPos","newLabels","oldPos","oldLabels","calcLabels","newOptions","startPos","endPos","newStarts","oldStarts","colWidth","rowHeight","squareSize","xTranslate","monthNameHeight","serializedSubDomains","cols","week","weekNo","toUpperCase","yyyyMmDd","dataValue","square","unitType","units","yPositions","offsets","barsWidth","newXPos","newYPos","newOffsets","oldXPos","oldYPos","oldOffsets","hideLine","hideDots","valuesOverPoints","Object","newValues","getComponent","k","assign","PercentageChart","barOptions","component","xPos","bars","get","indexOf","gOff","pOff","formattedLabels","fraction","setValues","showTip","PieChart","mouseMove","mouseLeave","hoverRadio","startAngle","prevSlicesProperties","slicesProperties","curAngle","originDiffAngle","diffAngle","endAngle","prevProperty","curStart","curEnd","curPath","property","flag","calTranslateByAngle","g_off","pageX","pageY","formatted_labels","percent","slices","prevIndex","curActiveSliceIndex","prevAcitve","curActiveSlice","hoverSlice","normalize","mantissa","exponent","sig","exp","man","getChartRangeIntervals","max","min","upperBound","lowerBound","range","noOfParts","partSize","intervals","getChartIntervals","maxValue","minValue","normalMaxValue","normalMinValue","calcChartIntervals","withMinimum","getPositiveFirstIntervals","absMinValue","intervalSize","unshift","posIntervals","pseudoMaxValue","pseudoMinValue","getZeroIndex","yPts","zeroIndex","interval","getIntervalSize","orderedArray","getValueRange","scale","yAxis","scaleMultiplier","getClosestInArray","goal","arr","closest","prev","curr","calcDistribution","distributionSize","dataMaxValue","distributionStep","distribution","checkpoint","getMaxCheckpoint","COL_WIDTH","ROW_HEIGHT","Heatmap","countLabel","validStarts","startSubDomain","startSubDomainIndex","discreteDomains","spacing","end","noOfWeeks","setFullYear","dataPoints","timestampSec","firstWeekStart","domainConfigs","getDomains","lessCol","dayName","dayText","daySquares","comp","daySquare","dateParts","lessText","moreTextX","moreText","startMonth","startYear","endMonth","endYear","noOfMonths","startOfMonth","getDomainConfig","startOfWeek","domainConfig","noOfMonthWeeks","getCol","empty","currentDate","currentDateWithinData","getSubDomainConfig","dataPrep","datasetLength","zeroArray","vals","chartType","yRegions","zeroDataPrep","zeroData","axisID","yMarkers","getShortenedLabels","chartWidth","isSeries","allowedSpace","allowedLetters","seriesMultiple","maxLabelLength","AxisChart","lineOptions","axisOptions","xAxis","xAxisMode","yAxisConfig","yAxisMode","id","xIsSeries","shortenYAxisNumbers","formatTooltipX","calcXPositions","calcYAxisParameters","getAllYValues","makeDataByIndex","unitWidth","xOffset","dataValues","intervalHeight","yAxisConfigObject","find","yAxisAlignment","yPtsArray","firstArr","calcDatasetPoints","calcYExtremes","calcYRegions","scaleAll","axis","barChartIndex","cumulativeYs","replace","char","stacked","yExtremes","cumulativeYPos","multiAxis","allValueLists","groupBy","cur","generateCumulative","cumulative","groupedDataSets","barDatasets","lineDatasets","barsConfigs","barIndex","spaceRatio","lineConfigs","minLine","dotSize","markerConfigs","optionals","dataUnitComponents","dataByIndex","formatX","formatY","titles","relX","relY","mapTooltipXPosition","dbi","yExtreme","formattedLabel","overlayGuides","currentIndex","currentUnit","setCurrentDataPoint","data_point","getDataPoint","datasetValues","splice","DonutChart","chartTypes","getChartByType","Chart","frappe","NAME","VERSION","Charts"],"mappings":"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"}